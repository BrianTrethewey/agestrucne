\hypertarget{namespacenegui_1_1pgutilities}{}\section{negui.\+pgutilities Namespace Reference}
\label{namespacenegui_1_1pgutilities}\index{negui.\+pgutilities@{negui.\+pgutilities}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{namespacenegui_1_1pgutilities_a20a66168135d35b6713e38b2503f6289}{do\+\_\+usage\+\_\+check} (ls\+\_\+this\+\_\+argv, ls\+\_\+required\+\_\+arg\+\_\+descriptions, ls\+\_\+optional\+\_\+arg\+\_\+descriptions=\mbox{[}$\,$\mbox{]}, b\+\_\+multi\+\_\+line\+\_\+msg=False, b\+\_\+unlimited\+\_\+final\+\_\+args=False, s\+\_\+note=None)
\item 
def {\bfseries is\+\_\+file\+\_\+and\+\_\+executable} (s\+\_\+path)\hypertarget{namespacenegui_1_1pgutilities_a8a347fe70cfaae23658adb58cd312e93}{}\label{namespacenegui_1_1pgutilities_a8a347fe70cfaae23658adb58cd312e93}

\item 
def {\bfseries confirm\+\_\+executable\+\_\+is\+\_\+in\+\_\+path} (s\+\_\+exectuable\+\_\+file\+\_\+name)\hypertarget{namespacenegui_1_1pgutilities_a8fe3f14ed21663af6196c0c53349c536}{}\label{namespacenegui_1_1pgutilities_a8fe3f14ed21663af6196c0c53349c536}

\item 
def {\bfseries manage\+\_\+process\+\_\+queue} (o\+\_\+queue\+\_\+with\+\_\+target\+\_\+calls, o\+\_\+queue\+\_\+to\+\_\+hold\+\_\+results=None)\hypertarget{namespacenegui_1_1pgutilities_a2096f66a8484e74902fb97c787c79345}{}\label{namespacenegui_1_1pgutilities_a2096f66a8484e74902fb97c787c79345}

\item 
def \hyperlink{namespacenegui_1_1pgutilities_a45d0d6e76c216a5ad3f6bc46fc68a701}{do\+\_\+pgopsimupop\+\_\+replicate\+\_\+from\+\_\+files} (s\+\_\+configuration\+\_\+file, dv\+\_\+input\+\_\+parm\+\_\+values\+\_\+by\+\_\+attribute, ls\+\_\+life\+\_\+table\+\_\+files, s\+\_\+param\+\_\+name\+\_\+file, s\+\_\+outfile\+\_\+basename, i\+\_\+replicate\+\_\+number)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
string {\bfseries P\+R\+O\+C\+E\+S\+S\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+T\+O\+P\+\_\+\+S\+I\+GN} = \textquotesingle{}S\+T\+OP\textquotesingle{}\hypertarget{namespacenegui_1_1pgutilities_aed436e1fc2eb29963ea30b17e614fd04}{}\label{namespacenegui_1_1pgutilities_aed436e1fc2eb29963ea30b17e614fd04}

\item 
{\bfseries s\+\_\+exec\+\_\+name} = sys.\+argv\mbox{[} 1 \mbox{]}\hypertarget{namespacenegui_1_1pgutilities_a25b185def2c6bb2698b1927b4a20a904}{}\label{namespacenegui_1_1pgutilities_a25b185def2c6bb2698b1927b4a20a904}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Description
Support defs for the pop gen interface programs.
\end{DoxyVerb}
 

\subsection{Function Documentation}
\index{negui\+::pgutilities@{negui\+::pgutilities}!do\+\_\+pgopsimupop\+\_\+replicate\+\_\+from\+\_\+files@{do\+\_\+pgopsimupop\+\_\+replicate\+\_\+from\+\_\+files}}
\index{do\+\_\+pgopsimupop\+\_\+replicate\+\_\+from\+\_\+files@{do\+\_\+pgopsimupop\+\_\+replicate\+\_\+from\+\_\+files}!negui\+::pgutilities@{negui\+::pgutilities}}
\subsubsection[{\texorpdfstring{do\+\_\+pgopsimupop\+\_\+replicate\+\_\+from\+\_\+files(s\+\_\+configuration\+\_\+file, dv\+\_\+input\+\_\+parm\+\_\+values\+\_\+by\+\_\+attribute, ls\+\_\+life\+\_\+table\+\_\+files, s\+\_\+param\+\_\+name\+\_\+file, s\+\_\+outfile\+\_\+basename, i\+\_\+replicate\+\_\+number)}{do_pgopsimupop_replicate_from_files(s_configuration_file, dv_input_parm_values_by_attribute, ls_life_table_files, s_param_name_file, s_outfile_basename, i_replicate_number)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgutilities.\+do\+\_\+pgopsimupop\+\_\+replicate\+\_\+from\+\_\+files (
\begin{DoxyParamCaption}
\item[{}]{s\+\_\+configuration\+\_\+file, }
\item[{}]{dv\+\_\+input\+\_\+parm\+\_\+values\+\_\+by\+\_\+attribute, }
\item[{}]{ls\+\_\+life\+\_\+table\+\_\+files, }
\item[{}]{s\+\_\+param\+\_\+name\+\_\+file, }
\item[{}]{s\+\_\+outfile\+\_\+basename, }
\item[{}]{i\+\_\+replicate\+\_\+number}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgutilities_a45d0d6e76c216a5ad3f6bc46fc68a701}{}\label{namespacenegui_1_1pgutilities_a45d0d6e76c216a5ad3f6bc46fc68a701}
\begin{DoxyVerb}necessitated by fact that python2 (and 3?) was not able to pickle 
a class-instance def to be used to run replicates of the pgopsimupop
doOp().  Python also failed to pickle SWIG-based code used in Simupop.
Thus the better design, in which  multiprocessing Pools would stay  encapsulated 
inside a class object seem problematic, though may be implement-able using 
reg_copy -- but I'm not confident in state of regcopy of imported simuPop code,
and so  I think is the safer solution, though it
does create a depandancy of the pgguisimupop object on this outside def.  
\end{DoxyVerb}
 

Definition at line 140 of file pgutilities.\+py.


\begin{DoxyCode}
140                                                 i\_replicate\_number ):
141     \textcolor{stringliteral}{'''}
142 \textcolor{stringliteral}{    necessitated by fact that python2 (and 3?) was not able to pickle }
143 \textcolor{stringliteral}{    a class-instance def to be used to run replicates of the pgopsimupop}
144 \textcolor{stringliteral}{    doOp().  Python also failed to pickle SWIG-based code used in Simupop.}
145 \textcolor{stringliteral}{    Thus the better design, in which  multiprocessing Pools would stay  encapsulated }
146 \textcolor{stringliteral}{    inside a class object seem problematic, though may be implement-able using }
147 \textcolor{stringliteral}{    reg\_copy -- but I'm not confident in state of regcopy of imported simuPop code,}
148 \textcolor{stringliteral}{    and so  I think is the safer solution, though it}
149 \textcolor{stringliteral}{    does create a depandancy of the pgguisimupop object on this outside def.  }
150 \textcolor{stringliteral}{    '''}
151 
152     s\_tag\_out=\textcolor{stringliteral}{""}
153 
154     \textcolor{keywordflow}{if} i\_replicate\_number \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
155         s\_tag\_out=\textcolor{stringliteral}{".r"} + str( i\_replicate\_number )
156     \textcolor{comment}{#end if rep number is not none}
157 
158     o\_resources=pgrec.PGSimuPopResources( ls\_life\_table\_files )
159     o\_paramset=pgpar.PGParamSet( s\_param\_name\_file )
160     o\_input=pgin.PGInputSimuPop( s\_configuration\_file, o\_resources, o\_paramset ) 
161     o\_input.makeInputConfig()
162 
163     \textcolor{comment}{#this updates the input's attributes}
164     \textcolor{comment}{#to reflect any changes in the param values,}
165     \textcolor{comment}{#that occured since the (source input object,}
166     \textcolor{comment}{#of which this is a copy) config file was read in:  }
167     \textcolor{keywordflow}{for} s\_attribute\_name \textcolor{keywordflow}{in} dv\_input\_parm\_values\_by\_attribute:
168         setattr( o\_input, s\_attribute\_name, 
169                 dv\_input\_parm\_values\_by\_attribute[ s\_attribute\_name ] )
170     \textcolor{comment}{#end for each attribute name}
171 
172     \textcolor{comment}{#reset reps to 1}
173     \textcolor{comment}{#as we are executing only one}
174     \textcolor{comment}{#replicate.  We assume this def}
175     \textcolor{comment}{#is being called as one of a number}
176     \textcolor{comment}{#of parallel process calls for}
177     \textcolor{comment}{#a set of replicates, the total }
178     \textcolor{comment}{#known to the caller:}
179     o\_input.reps=1
180 
181     o\_output=pgout.PGOutputSimuPop( s\_outfile\_basename )
182 
183     o\_new\_pgopsimupop\_instance=pgsim.PGOpSimuPop( o\_input,
184             o\_output )
185     o\_new\_pgopsimupop\_instance.prepareOp( s\_tag\_out  )
186     o\_new\_pgopsimupop\_instance.doOp()
187 
188     \textcolor{keywordflow}{return}
189 \textcolor{comment}{#end do\_pgopsimupop\_replicate\_from\_files}
190 
191 
\end{DoxyCode}
\index{negui\+::pgutilities@{negui\+::pgutilities}!do\+\_\+usage\+\_\+check@{do\+\_\+usage\+\_\+check}}
\index{do\+\_\+usage\+\_\+check@{do\+\_\+usage\+\_\+check}!negui\+::pgutilities@{negui\+::pgutilities}}
\subsubsection[{\texorpdfstring{do\+\_\+usage\+\_\+check(ls\+\_\+this\+\_\+argv, ls\+\_\+required\+\_\+arg\+\_\+descriptions, ls\+\_\+optional\+\_\+arg\+\_\+descriptions=[], b\+\_\+multi\+\_\+line\+\_\+msg=\+False, b\+\_\+unlimited\+\_\+final\+\_\+args=\+False, s\+\_\+note=\+None)}{do_usage_check(ls_this_argv, ls_required_arg_descriptions, ls_optional_arg_descriptions=[], b_multi_line_msg=False, b_unlimited_final_args=False, s_note=None)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgutilities.\+do\+\_\+usage\+\_\+check (
\begin{DoxyParamCaption}
\item[{}]{ls\+\_\+this\+\_\+argv, }
\item[{}]{ls\+\_\+required\+\_\+arg\+\_\+descriptions, }
\item[{}]{ls\+\_\+optional\+\_\+arg\+\_\+descriptions = {\ttfamily \mbox{[}\mbox{]}}, }
\item[{}]{b\+\_\+multi\+\_\+line\+\_\+msg = {\ttfamily False}, }
\item[{}]{b\+\_\+unlimited\+\_\+final\+\_\+args = {\ttfamily False}, }
\item[{}]{s\+\_\+note = {\ttfamily None}}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgutilities_a20a66168135d35b6713e38b2503f6289}{}\label{namespacenegui_1_1pgutilities_a20a66168135d35b6713e38b2503f6289}
\begin{DoxyVerb}arg 1 expects sys.argv, or a copy
arg 2 expects a list strings, in order, required args
arg 3 expects a list of strings, in order, any optional args
\end{DoxyVerb}
 

Definition at line 27 of file pgutilities.\+py.


\begin{DoxyCode}
27             s\_note=\textcolor{keywordtype}{None}):
28     \textcolor{stringliteral}{'''}
29 \textcolor{stringliteral}{    arg 1 expects sys.argv, or a copy}
30 \textcolor{stringliteral}{    arg 2 expects a list strings, in order, required args}
31 \textcolor{stringliteral}{    arg 3 expects a list of strings, in order, any optional args}
32 \textcolor{stringliteral}{    '''}
33     i\_num\_args\_required = len( ls\_required\_arg\_descriptions )
34     i\_num\_args\_optional = len( ls\_optional\_arg\_descriptions )
35     i\_max\_poss\_num\_args = i\_num\_args\_required + i\_num\_args\_optional 
36     i\_num\_args\_passed = len( ls\_this\_argv ) - 1  
37     s\_usage\_string = \textcolor{stringliteral}{""}
38     s\_arg\_delimit=\textcolor{stringliteral}{""}
39     \textcolor{keywordflow}{if} b\_multi\_line\_msg == \textcolor{keyword}{True}:
40         s\_arg\_delimit=\textcolor{stringliteral}{"\(\backslash\)n"}
41     \textcolor{comment}{#end if we put each arg descript on a }
42     \textcolor{comment}{#separate line of output}
43 
44     \textcolor{keywordflow}{if} i\_num\_args\_passed <  i\_num\_args\_required  \(\backslash\)
45             \textcolor{keywordflow}{or} (i\_num\_args\_passed > i\_max\_poss\_num\_args \textcolor{keywordflow}{and} b\_unlimited\_final\_args == \textcolor{keyword}{False} ): 
46     
47         s\_scriptname = os.path.basename( ls\_this\_argv[ 0 ] )    
48         s\_usage\_string = \textcolor{stringliteral}{"usage: "} + s\_scriptname 
49 
50         \textcolor{keywordflow}{if} b\_multi\_line\_msg:
51             s\_usage\_string=\textcolor{stringliteral}{"usage: "} + s\_scriptname \(\backslash\)
52                     + \textcolor{stringliteral}{"\(\backslash\)nargs:\(\backslash\)n"}
53         \textcolor{keywordflow}{else}:
54             s\_usage\_string = \textcolor{stringliteral}{"usage: "} + s\_scriptname 
55         \textcolor{comment}{#end if multi line else not}
56 
57         \textcolor{keywordflow}{for} s\_arg \textcolor{keywordflow}{in} ls\_required\_arg\_descriptions:
58 
59             s\_usage\_string += \textcolor{stringliteral}{" <"} \(\backslash\)
60                 + s\_arg + \textcolor{stringliteral}{">"} \(\backslash\)
61                 + s\_arg\_delimit
62         \textcolor{comment}{#end for each requried arg}
63 
64         \textcolor{keywordflow}{for} s\_arg \textcolor{keywordflow}{in} ls\_optional\_arg\_descriptions:
65 
66             s\_usage\_string += \textcolor{stringliteral}{" <(optional) "} \(\backslash\)
67                 + s\_arg + \textcolor{stringliteral}{">"} \(\backslash\)
68                 + s\_arg\_delimit
69         \textcolor{comment}{#end for each required arg}
70 
71     \textcolor{comment}{#end if number of args is out of range}
72 
73     \textcolor{keywordflow}{if} s\_usage\_string != \textcolor{stringliteral}{""} \textcolor{keywordflow}{and} s\_note \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
74         s\_usage\_string=s\_usage\_string + \textcolor{stringliteral}{"\(\backslash\)n"} + s\_note
75     \textcolor{comment}{#end if note }
76 
77     \textcolor{keywordflow}{return}  s\_usage\_string 
78 \textcolor{comment}{#def do\_usage\_check}
79 
80 
\end{DoxyCode}
