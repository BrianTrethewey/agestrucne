\hypertarget{namespacenegui_1_1pgdriveneestimator}{}\section{negui.\+pgdriveneestimator Namespace Reference}
\label{namespacenegui_1_1pgdriveneestimator}\index{negui.\+pgdriveneestimator@{negui.\+pgdriveneestimator}}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classnegui_1_1pgdriveneestimator_1_1DebugMode}{Debug\+Mode}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def {\bfseries set\+\_\+indices\+\_\+ne\+\_\+estimator\+\_\+output\+\_\+fields\+\_\+to\+\_\+skip} ()\hypertarget{namespacenegui_1_1pgdriveneestimator_afd1338775d832ffc8d84cc10c6d1815b}{}\label{namespacenegui_1_1pgdriveneestimator_afd1338775d832ffc8d84cc10c6d1815b}

\item 
def {\bfseries get\+\_\+datetime\+\_\+as\+\_\+string} ()\hypertarget{namespacenegui_1_1pgdriveneestimator_a2d64d88a4d4f63a1f8e0c71606942690}{}\label{namespacenegui_1_1pgdriveneestimator_a2d64d88a4d4f63a1f8e0c71606942690}

\item 
def {\bfseries set\+\_\+debug\+\_\+mode} (s\+\_\+arg)\hypertarget{namespacenegui_1_1pgdriveneestimator_aa1b949a1baced8ac2725ae493f7216d8}{}\label{namespacenegui_1_1pgdriveneestimator_aa1b949a1baced8ac2725ae493f7216d8}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a944008262ae2ee7c6fc796499be626ce}{get\+\_\+invalid\+\_\+file\+\_\+names} (ls\+\_\+file\+\_\+names)
\item 
def {\bfseries file\+\_\+name\+\_\+list\+\_\+is\+\_\+all\+\_\+strings} (ls\+\_\+files)\hypertarget{namespacenegui_1_1pgdriveneestimator_a25129002805e932c87b657a083173863}{}\label{namespacenegui_1_1pgdriveneestimator_a25129002805e932c87b657a083173863}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a15b09d2967ec4812353b0e146f074799}{get\+\_\+genepop\+\_\+file\+\_\+list} (s\+\_\+genepop\+\_\+files\+\_\+arg)
\item 
def {\bfseries parse\+\_\+args} (args)\hypertarget{namespacenegui_1_1pgdriveneestimator_a3a0c075de2bc7a0d00b1893128b189c8}{}\label{namespacenegui_1_1pgdriveneestimator_a3a0c075de2bc7a0d00b1893128b189c8}

\item 
def {\bfseries get\+\_\+sample\+\_\+val\+\_\+and\+\_\+rep\+\_\+number\+\_\+from\+\_\+sample\+\_\+name} (s\+\_\+sample\+\_\+name, s\+\_\+sample\+\_\+scheme)\hypertarget{namespacenegui_1_1pgdriveneestimator_a3807e058c5f9e9e73eb6ecae5221853b}{}\label{namespacenegui_1_1pgdriveneestimator_a3807e058c5f9e9e73eb6ecae5221853b}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_ac98833013f11d6aa3544b0fc60951632}{raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file} (o\+\_\+genepopfile)
\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_ab546af99f06d3ec795da61f806ffafa9}{get\+\_\+pops\+\_\+in\+\_\+file\+\_\+outside\+\_\+valid\+\_\+size\+\_\+range} (o\+\_\+genepopfile, i\+\_\+min\+\_\+pop\+\_\+size, i\+\_\+max\+\_\+pop\+\_\+size)
\item 
def {\bfseries do\+\_\+estimate} (o\+\_\+genepopfile, o\+\_\+ne\+\_\+estimator, v\+\_\+sample\+\_\+param\+\_\+val, f\+\_\+min\+\_\+allele\+\_\+freq, s\+\_\+subsample\+\_\+tag, s\+\_\+loci\+\_\+sample\+\_\+tag, s\+\_\+population\+\_\+number, s\+\_\+census, i\+\_\+replicate\+\_\+number, o\+\_\+debug\+\_\+mode, I\+D\+X\+\_\+\+N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+IP)\hypertarget{namespacenegui_1_1pgdriveneestimator_a081b86aa53c4305557103884132dd478}{}\label{namespacenegui_1_1pgdriveneestimator_a081b86aa53c4305557103884132dd478}

\item 
def {\bfseries write\+\_\+results} (ds\+\_\+results, o\+\_\+main\+\_\+outfile, o\+\_\+secondary\+\_\+outfile)\hypertarget{namespacenegui_1_1pgdriveneestimator_a97bd4891f7343e405094bdf307c7ee89}{}\label{namespacenegui_1_1pgdriveneestimator_a97bd4891f7343e405094bdf307c7ee89}

\item 
def {\bfseries update\+\_\+indiv\+\_\+list} (dddli\+\_\+indiv\+\_\+list, dv\+\_\+indiv\+\_\+info\+\_\+for\+\_\+replicate, lv\+\_\+sample\+\_\+vals)\hypertarget{namespacenegui_1_1pgdriveneestimator_a087de69842dbbb60eaad4e2f692a06c7}{}\label{namespacenegui_1_1pgdriveneestimator_a087de69842dbbb60eaad4e2f692a06c7}

\item 
def {\bfseries make\+\_\+indiv\+\_\+table\+\_\+name} ()\hypertarget{namespacenegui_1_1pgdriveneestimator_aba42585f01bf9ed8468c043e7f05e56a}{}\label{namespacenegui_1_1pgdriveneestimator_aba42585f01bf9ed8468c043e7f05e56a}

\item 
def {\bfseries get\+\_\+indiv\+\_\+table\+\_\+header} (lf\+\_\+proportions)\hypertarget{namespacenegui_1_1pgdriveneestimator_a8ea31f316844b96fb9ba5d9985b16ecc}{}\label{namespacenegui_1_1pgdriveneestimator_a8ea31f316844b96fb9ba5d9985b16ecc}

\item 
def {\bfseries write\+\_\+indiv\+\_\+table} (dddli\+\_\+indiv\+\_\+list, s\+\_\+file\+\_\+name, lf\+\_\+proportions)\hypertarget{namespacenegui_1_1pgdriveneestimator_aafa226c9f86340bb646ac850410d315c}{}\label{namespacenegui_1_1pgdriveneestimator_aafa226c9f86340bb646ac850410d315c}

\item 
def {\bfseries print\+\_\+test\+\_\+list\+\_\+replicate\+\_\+selection\+\_\+indices} (o\+\_\+genepopfile, s\+\_\+sample\+\_\+scheme, s\+\_\+indiv\+\_\+subsample\+\_\+tag, o\+\_\+secondary\+\_\+outfile, s\+\_\+population\+\_\+subsample\+\_\+tag)\hypertarget{namespacenegui_1_1pgdriveneestimator_a97627c981f1e2e59eecd69efb11c7044}{}\label{namespacenegui_1_1pgdriveneestimator_a97627c981f1e2e59eecd69efb11c7044}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a367b16a89c7ae46ab0bda5b37e68d9af}{parse\+\_\+sampling\+\_\+list\+\_\+that\+\_\+uses\+\_\+indiv\+\_\+id\+\_\+fields} (ls\+\_\+sampling\+\_\+list\+\_\+items)
\item 
def {\bfseries get\+\_\+field\+\_\+names\+\_\+from\+\_\+criteria\+\_\+test} (ls\+\_\+field\+\_\+names, s\+\_\+test)\hypertarget{namespacenegui_1_1pgdriveneestimator_a37d1a0b6a3f2554bf105a44578083490}{}\label{namespacenegui_1_1pgdriveneestimator_a37d1a0b6a3f2554bf105a44578083490}

\item 
def {\bfseries get\+\_\+criteria\+\_\+sampling\+\_\+params} (lv\+\_\+sample\+\_\+values)\hypertarget{namespacenegui_1_1pgdriveneestimator_af360c7e217a3b975a58fcd93b11fcdd3}{}\label{namespacenegui_1_1pgdriveneestimator_af360c7e217a3b975a58fcd93b11fcdd3}

\item 
def {\bfseries get\+\_\+cohorts\+\_\+sampling\+\_\+params} (lv\+\_\+sample\+\_\+values)\hypertarget{namespacenegui_1_1pgdriveneestimator_a6539e2249f040ddf8ce8a80fc778ec85}{}\label{namespacenegui_1_1pgdriveneestimator_a6539e2249f040ddf8ce8a80fc778ec85}

\item 
def {\bfseries get\+\_\+relateds\+\_\+sampling\+\_\+params} (lv\+\_\+sample\+\_\+values)\hypertarget{namespacenegui_1_1pgdriveneestimator_af7a5417c7b36ee09c02ae3e0526f6999}{}\label{namespacenegui_1_1pgdriveneestimator_af7a5417c7b36ee09c02ae3e0526f6999}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a8b8feb1e5b7dcf5e546b4bbdcebb59a8}{do\+\_\+sample} (o\+\_\+genepopfile, i\+\_\+min\+\_\+pop\+\_\+range, i\+\_\+max\+\_\+pop\+\_\+range, i\+\_\+min\+\_\+pop\+\_\+size, i\+\_\+max\+\_\+pop\+\_\+size, s\+\_\+sample\+\_\+scheme, lv\+\_\+sample\+\_\+values, i\+\_\+replicates, s\+\_\+loci\+\_\+sampling\+\_\+scheme, v\+\_\+loci\+\_\+sampling\+\_\+scheme\+\_\+param, i\+\_\+min\+\_\+loci\+\_\+position, i\+\_\+max\+\_\+loci\+\_\+position, i\+\_\+max\+\_\+total\+\_\+loci)
\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_afe018505bc1f9a64aa804139954ae5f1}{do\+\_\+sample\+\_\+loci} (o\+\_\+genepopfile, s\+\_\+loci\+\_\+sampling\+\_\+scheme, v\+\_\+loci\+\_\+sampling\+\_\+scheme\+\_\+param, i\+\_\+min\+\_\+loci\+\_\+position, i\+\_\+max\+\_\+loci\+\_\+position, i\+\_\+max\+\_\+total\+\_\+loci, li\+\_\+population\+\_\+list)
\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a84955fc339f0354149185b5fa6444340}{get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name} (s\+\_\+original\+\_\+genepop\+\_\+file\+\_\+name, s\+\_\+indiv\+\_\+sample, s\+\_\+this\+\_\+pop\+\_\+sample\+\_\+name)
\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_ab0bca56261e2d7951b4c7a65897ee053}{add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate} (o\+\_\+genepopfile, s\+\_\+sample\+\_\+scheme, s\+\_\+loci\+\_\+subsample\+\_\+tag, f\+\_\+min\+\_\+allele\+\_\+freq, i\+\_\+min\+\_\+pop\+\_\+size, i\+\_\+max\+\_\+pop\+\_\+size, o\+\_\+debug\+\_\+mode, llv\+\_\+args\+\_\+each\+\_\+process, I\+D\+X\+\_\+\+N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+IP, o\+\_\+secondary\+\_\+outfile)
\item 
def {\bfseries write\+\_\+result\+\_\+sets} (lds\+\_\+results, lv\+\_\+sample\+\_\+values, o\+\_\+debug\+\_\+mode, o\+\_\+main\+\_\+outfile, o\+\_\+secondary\+\_\+outfile)\hypertarget{namespacenegui_1_1pgdriveneestimator_aa45ae8154c350b0a30ba8c1037bfd445}{}\label{namespacenegui_1_1pgdriveneestimator_aa45ae8154c350b0a30ba8c1037bfd445}

\item 
def {\bfseries execute\+\_\+ne\+\_\+for\+\_\+each\+\_\+sample} (llv\+\_\+args\+\_\+each\+\_\+process, o\+\_\+process\+\_\+pool, o\+\_\+debug\+\_\+mode, o\+\_\+multiprocessing\+\_\+event)\hypertarget{namespacenegui_1_1pgdriveneestimator_aefaaafaa951edf46424dfc57535046a7}{}\label{namespacenegui_1_1pgdriveneestimator_aefaaafaa951edf46424dfc57535046a7}

\item 
def {\bfseries write\+\_\+header\+\_\+main\+\_\+table} (I\+D\+X\+\_\+\+N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+IP, o\+\_\+main\+\_\+outfile)\hypertarget{namespacenegui_1_1pgdriveneestimator_adffb79ac878373773c2927935685788d}{}\label{namespacenegui_1_1pgdriveneestimator_adffb79ac878373773c2927935685788d}

\item 
def {\bfseries get\+\_\+sample\+\_\+abbrevs\+\_\+for\+\_\+criteria} (lds\+\_\+results)\hypertarget{namespacenegui_1_1pgdriveneestimator_a0f1e4581a5ef4ce1eb077c445856ed8f}{}\label{namespacenegui_1_1pgdriveneestimator_a0f1e4581a5ef4ce1eb077c445856ed8f}

\item 
def {\bfseries drive\+\_\+estimator} (args)\hypertarget{namespacenegui_1_1pgdriveneestimator_a688d7a2f0a11f0225a5f95d7403d771e}{}\label{namespacenegui_1_1pgdriveneestimator_a688d7a2f0a11f0225a5f95d7403d771e}

\item 
def {\bfseries did\+\_\+find\+\_\+ne\+\_\+estimator\+\_\+executable} ()\hypertarget{namespacenegui_1_1pgdriveneestimator_acd20398ef9d21132f19d1c0e564b25b9}{}\label{namespacenegui_1_1pgdriveneestimator_acd20398ef9d21132f19d1c0e564b25b9}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a9195d73a2642b87625772820ffff8023}{mymain} (q\+\_\+args)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
bool {\bfseries V\+E\+R\+B\+O\+SE} = False\hypertarget{namespacenegui_1_1pgdriveneestimator_aeae180a6a906ac89f58c9af1f6c8fd77}{}\label{namespacenegui_1_1pgdriveneestimator_aeae180a6a906ac89f58c9af1f6c8fd77}

\item 
bool {\bfseries V\+E\+R\+Y\+\_\+\+V\+E\+R\+B\+O\+SE} = False\hypertarget{namespacenegui_1_1pgdriveneestimator_ab3e4d5f9e16fe1e71748c637b908eb55}{}\label{namespacenegui_1_1pgdriveneestimator_ab3e4d5f9e16fe1e71748c637b908eb55}

\item 
string {\bfseries spacer} = \char`\"{} \char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_aafee69ac080e88e81d87a33561b3fcea}{}\label{namespacenegui_1_1pgdriveneestimator_aafee69ac080e88e81d87a33561b3fcea}

\item 
string {\bfseries spacer2} = \char`\"{} \char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a9f80a81346d030624035928340fd4b9e}{}\label{namespacenegui_1_1pgdriveneestimator_a9f80a81346d030624035928340fd4b9e}

\item 
string {\bfseries spacer3} = \char`\"{} $\ast$\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a28b0742536e40623d9882bf0631f6217}{}\label{namespacenegui_1_1pgdriveneestimator_a28b0742536e40623d9882bf0631f6217}

\item 
list {\bfseries L\+S\+\_\+\+F\+L\+A\+G\+S\+\_\+\+S\+H\+O\+R\+T\+\_\+\+R\+E\+Q\+U\+I\+R\+ED} = \mbox{[} \char`\"{}-\/f\char`\"{}, \char`\"{}-\/s\char`\"{}, \char`\"{}-\/p\char`\"{}, \char`\"{}-\/m\char`\"{}, \char`\"{}-\/a\char`\"{}, \char`\"{}-\/r\char`\"{}, \char`\"{}-\/e\char`\"{}, \char`\"{}-\/c\char`\"{}, \char`\"{}-\/l\char`\"{}, \char`\"{}-\/i\char`\"{}, \char`\"{}-\/g\char`\"{}, \char`\"{}-\/x\char`\"{} \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_a483e5730350478fd7a79e4a59c1381ef}{}\label{namespacenegui_1_1pgdriveneestimator_a483e5730350478fd7a79e4a59c1381ef}

\item 
list {\bfseries L\+S\+\_\+\+F\+L\+A\+G\+S\+\_\+\+L\+O\+N\+G\+\_\+\+R\+E\+Q\+U\+I\+R\+ED} = \mbox{[} \char`\"{}-\/-\/gpfiles\char`\"{}, \char`\"{}-\/-\/scheme\char`\"{}, \char`\"{}-\/-\/params\char`\"{}, \char`\"{}-\/-\/minpopsize\char`\"{}, \char`\"{}-\/-\/maxpopsize\char`\"{}, \char`\"{}-\/-\/poprange\char`\"{}, \char`\"{}-\/-\/minallelefreq\char`\"{}, \char`\"{}-\/-\/replicates\char`\"{}, \char`\"{}-\/-\/locischeme\char`\"{}, \char`\"{}-\/-\/locischemeparams\char`\"{}, \char`\"{}-\/-\/locirange\char`\"{}, \char`\"{}-\/-\/maxtotalloci\char`\"{} \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_a8bbe97508573b995c1b4647b14b3bad5}{}\label{namespacenegui_1_1pgdriveneestimator_a8bbe97508573b995c1b4647b14b3bad5}

\item 
list {\bfseries L\+S\+\_\+\+A\+R\+G\+S\+\_\+\+H\+E\+L\+P\+\_\+\+R\+E\+Q\+U\+I\+R\+ED}\hypertarget{namespacenegui_1_1pgdriveneestimator_a52b60d12ffe6a87aacf57d1d6ef98cba}{}\label{namespacenegui_1_1pgdriveneestimator_a52b60d12ffe6a87aacf57d1d6ef98cba}

\item 
list {\bfseries L\+S\+\_\+\+F\+L\+A\+G\+S\+\_\+\+S\+H\+O\+R\+T\+\_\+\+O\+P\+T\+I\+O\+N\+AL} = \mbox{[} \char`\"{}-\/o\char`\"{}, \char`\"{}-\/d\char`\"{} \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_a9faf32e01452fe45ae54a6462c39a5af}{}\label{namespacenegui_1_1pgdriveneestimator_a9faf32e01452fe45ae54a6462c39a5af}

\item 
list {\bfseries L\+S\+\_\+\+F\+L\+A\+G\+S\+\_\+\+L\+O\+N\+G\+\_\+\+O\+P\+T\+I\+O\+N\+AL} = \mbox{[} \char`\"{}-\/-\/processes\char`\"{}, \char`\"{}-\/-\/mode\char`\"{} \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_a4c3f7a4b71a9b4887adc55f489cc4ace}{}\label{namespacenegui_1_1pgdriveneestimator_a4c3f7a4b71a9b4887adc55f489cc4ace}

\item 
list {\bfseries L\+S\+\_\+\+A\+R\+G\+S\+\_\+\+H\+E\+L\+P\+\_\+\+O\+P\+T\+I\+O\+N\+AL}
\item 
list {\bfseries H\+I\+D\+D\+E\+N\+\_\+\+A\+R\+GS} = \mbox{[} \char`\"{}file\+\_\+object\+\_\+main\char`\"{}, \char`\"{}file\+\_\+object\+\_\+secondary\char`\"{}, \char`\"{}multiprocessing\+\_\+event\char`\"{} \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_a6fd954e84a4eb8eeb2a1a63e5f53c716}{}\label{namespacenegui_1_1pgdriveneestimator_a6fd954e84a4eb8eeb2a1a63e5f53c716}

\item 
string {\bfseries D\+E\+F\+A\+U\+L\+T\+\_\+\+N\+U\+M\+\_\+\+P\+R\+O\+C\+E\+S\+S\+ES} = \char`\"{}1\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a2e948c0ce60271c8e6e3b08edb453839}{}\label{namespacenegui_1_1pgdriveneestimator_a2e948c0ce60271c8e6e3b08edb453839}

\item 
string {\bfseries D\+E\+F\+A\+U\+L\+T\+\_\+\+D\+E\+B\+U\+G\+\_\+\+M\+O\+DE} = \char`\"{}no\+\_\+debug\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_af83e46ff34683de5b4e27783ac68425f}{}\label{namespacenegui_1_1pgdriveneestimator_af83e46ff34683de5b4e27783ac68425f}

\item 
int {\bfseries M\+A\+X\+\_\+\+G\+E\+N\+E\+P\+O\+P\+\_\+\+F\+I\+L\+E\+\_\+\+N\+A\+M\+E\+\_\+\+L\+E\+N\+G\+TH} = 31\hypertarget{namespacenegui_1_1pgdriveneestimator_aaaca09e92573315d60360d27b83338ee}{}\label{namespacenegui_1_1pgdriveneestimator_aaaca09e92573315d60360d27b83338ee}

\item 
float {\bfseries S\+E\+C\+O\+N\+D\+S\+\_\+\+T\+O\+\_\+\+S\+L\+E\+EP} = 1.\+00\hypertarget{namespacenegui_1_1pgdriveneestimator_a1363a44c877cd0837fd1f4eae1f2d6e9}{}\label{namespacenegui_1_1pgdriveneestimator_a1363a44c877cd0837fd1f4eae1f2d6e9}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+B\+Y\+\_\+\+N\+O\+NE} = \char`\"{}none\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a246310ae93ed3bccc2b7d6a21bcfd917}{}\label{namespacenegui_1_1pgdriveneestimator_a246310ae93ed3bccc2b7d6a21bcfd917}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+B\+Y\+\_\+\+P\+E\+R\+C\+E\+N\+T\+A\+G\+ES} = \char`\"{}percent\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a6ee69b369b673a4e1a4bd9538dd98416}{}\label{namespacenegui_1_1pgdriveneestimator_a6ee69b369b673a4e1a4bd9538dd98416}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+B\+Y\+\_\+\+R\+E\+M\+O\+V\+AL} = \char`\"{}remove\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a9ec6d87d70349dd43f33a16cfa7e68c0}{}\label{namespacenegui_1_1pgdriveneestimator_a9ec6d87d70349dd43f33a16cfa7e68c0}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+B\+Y\+\_\+\+C\+R\+I\+T\+E\+R\+IA} = \char`\"{}criteria\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a7faedb889c28308cf8fe4c57fcff39b4}{}\label{namespacenegui_1_1pgdriveneestimator_a7faedb889c28308cf8fe4c57fcff39b4}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+B\+Y\+\_\+\+C\+O\+H\+O\+RT} = \char`\"{}cohorts\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_abc2562316b08e3e87ba66b5c7bcd6515}{}\label{namespacenegui_1_1pgdriveneestimator_abc2562316b08e3e87ba66b5c7bcd6515}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+B\+Y\+\_\+\+C\+O\+H\+O\+R\+T\+\_\+\+P\+E\+R\+C\+E\+N\+T\+A\+GE} = \char`\"{}cohortsperc\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a853653f5fbe4d6a095c97a852e222ea2}{}\label{namespacenegui_1_1pgdriveneestimator_a853653f5fbe4d6a095c97a852e222ea2}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+B\+Y\+\_\+\+R\+E\+L\+A\+T\+E\+DS} = \char`\"{}relateds\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_ab490243dcfbfaf42e0e9454ebce74521}{}\label{namespacenegui_1_1pgdriveneestimator_ab490243dcfbfaf42e0e9454ebce74521}

\item 
list {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+S\+C\+H\+E\+M\+E\+S\+\_\+\+N\+O\+N\+\_\+\+C\+R\+I\+T\+E\+R\+IA}
\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+L\+O\+C\+I\+\_\+\+S\+C\+H\+E\+M\+E\+\_\+\+N\+O\+NE} = \char`\"{}none\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a6d7da19fa549e375834075b13ebf02c5}{}\label{namespacenegui_1_1pgdriveneestimator_a6d7da19fa549e375834075b13ebf02c5}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+L\+O\+C\+I\+\_\+\+S\+C\+H\+E\+M\+E\+\_\+\+P\+E\+R\+C\+E\+NT} = \char`\"{}percent\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a312ff7ad92da1221ed16b20ced0bf49b}{}\label{namespacenegui_1_1pgdriveneestimator_a312ff7ad92da1221ed16b20ced0bf49b}

\item 
string {\bfseries D\+E\+F\+A\+U\+L\+T\+\_\+\+L\+O\+C\+I\+\_\+\+S\+A\+M\+P\+L\+E\+\_\+\+T\+AG} = \char`\"{}loci\+\_\+sample\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a31ddb30a42003f3bd52b0209ecd9616d}{}\label{namespacenegui_1_1pgdriveneestimator_a31ddb30a42003f3bd52b0209ecd9616d}

\item 
string {\bfseries O\+U\+T\+P\+U\+T\+\_\+\+D\+E\+L\+I\+M\+I\+T\+ER} = \char`\"{}\textbackslash{}t\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a68b08075d6e1a58ae325c600881c9d6c}{}\label{namespacenegui_1_1pgdriveneestimator_a68b08075d6e1a58ae325c600881c9d6c}

\item 
string {\bfseries E\+N\+D\+L\+I\+N\+E\+\_\+\+S\+EQ} = \char`\"{}\textbackslash{}n\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_aa8d38cb5ca07a3c1f89cd4c3d7cccb08}{}\label{namespacenegui_1_1pgdriveneestimator_aa8d38cb5ca07a3c1f89cd4c3d7cccb08}

\item 
string {\bfseries O\+U\+T\+P\+U\+T\+\_\+\+E\+N\+D\+L\+I\+NE} = \char`\"{}\textbackslash{}n\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a56a1a1d753221dfbed6ffc7cd58222f1}{}\label{namespacenegui_1_1pgdriveneestimator_a56a1a1d753221dfbed6ffc7cd58222f1}

\item 
string {\bfseries R\+E\+P\+L\+I\+C\+A\+T\+E\+\_\+\+D\+E\+L\+I\+M\+I\+T\+ER} = \char`\"{},\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a4a72408d1cee500503a7aa185253b438}{}\label{namespacenegui_1_1pgdriveneestimator_a4a72408d1cee500503a7aa185253b438}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+S\+C\+H\+E\+M\+E\+\_\+\+P\+A\+R\+A\+M\+\_\+\+D\+E\+L\+I\+M\+I\+T\+ER} = \char`\"{},\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a968165e72c6ac1b942ae21dc2ec18af2}{}\label{namespacenegui_1_1pgdriveneestimator_a968165e72c6ac1b942ae21dc2ec18af2}

\item 
list {\bfseries N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+IP} = \mbox{[} \char`\"{}case\+\_\+number\char`\"{} \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_a77c91566694093f57286607ae144d35a}{}\label{namespacenegui_1_1pgdriveneestimator_a77c91566694093f57286607ae144d35a}

\item 
list {\bfseries N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+L\+E\+\_\+\+T\+A\+GS} = \mbox{[} \char`\"{}No\+Dat.\+txt\char`\"{}, \char`\"{}x\+Tp.\+txt\char`\"{}, \char`\"{}ne\+\_\+run.\+txt\char`\"{} \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_a167fb016fbc3709c4c778c4a5157cd06}{}\label{namespacenegui_1_1pgdriveneestimator_a167fb016fbc3709c4c778c4a5157cd06}

\item 
string {\bfseries G\+L\+O\+B\+\_\+\+I\+N\+T\+E\+R\+M\+E\+D\+I\+A\+T\+E\+\_\+\+G\+E\+N\+E\+P\+O\+P\+\_\+\+F\+I\+L\+E\+\_\+\+T\+A\+GS} = \char`\"{}$\ast$\+\_\+r\+\_\+$\ast$\+\_\+g\+\_\+$\ast$\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a1bb977fffd730588ade2008f702d6110}{}\label{namespacenegui_1_1pgdriveneestimator_a1bb977fffd730588ade2008f702d6110}

\item 
string {\bfseries I\+N\+P\+U\+T\+\_\+\+F\+I\+L\+E\+\_\+\+D\+O\+T\+\_\+\+C\+H\+A\+R\+\_\+\+R\+E\+P\+L\+A\+C\+E\+M\+E\+NT} = \char`\"{}\+\_\+\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_ae33783002cdab9bc1d96f7cfe99a0ec9}{}\label{namespacenegui_1_1pgdriveneestimator_ae33783002cdab9bc1d96f7cfe99a0ec9}

\item 
{\bfseries o\+\_\+parser} = ap.\+Argument\+Parser()\hypertarget{namespacenegui_1_1pgdriveneestimator_a5d6d3756a8ddff6ece719654fb970636}{}\label{namespacenegui_1_1pgdriveneestimator_a5d6d3756a8ddff6ece719654fb970636}

\item 
{\bfseries o\+\_\+arglist} = o\+\_\+parser.\+add\+\_\+argument\+\_\+group( \char`\"{}args\char`\"{} )\hypertarget{namespacenegui_1_1pgdriveneestimator_a22a84c6d9023007cf69fd2e3d62dcb86}{}\label{namespacenegui_1_1pgdriveneestimator_a22a84c6d9023007cf69fd2e3d62dcb86}

\item 
{\bfseries i\+\_\+total\+\_\+nonopt} = len( L\+S\+\_\+\+F\+L\+A\+G\+S\+\_\+\+S\+H\+O\+R\+T\+\_\+\+R\+E\+Q\+U\+I\+R\+ED )\hypertarget{namespacenegui_1_1pgdriveneestimator_aa4e6982ff99236ac13e0af4c4d6e8839}{}\label{namespacenegui_1_1pgdriveneestimator_aa4e6982ff99236ac13e0af4c4d6e8839}

\item 
{\bfseries help}\hypertarget{namespacenegui_1_1pgdriveneestimator_ad407ca10f30961eabc0630c21fe8da45}{}\label{namespacenegui_1_1pgdriveneestimator_ad407ca10f30961eabc0630c21fe8da45}

\item 
{\bfseries required}\hypertarget{namespacenegui_1_1pgdriveneestimator_ab5c3d005ba8659dc07a5f3171c7214df}{}\label{namespacenegui_1_1pgdriveneestimator_ab5c3d005ba8659dc07a5f3171c7214df}

\item 
{\bfseries i\+\_\+total\+\_\+opt} = len( L\+S\+\_\+\+F\+L\+A\+G\+S\+\_\+\+S\+H\+O\+R\+T\+\_\+\+O\+P\+T\+I\+O\+N\+AL )\hypertarget{namespacenegui_1_1pgdriveneestimator_a3c6b1b9d9500e05eca62433ac13c8692}{}\label{namespacenegui_1_1pgdriveneestimator_a3c6b1b9d9500e05eca62433ac13c8692}

\item 
{\bfseries o\+\_\+args} = o\+\_\+parser.\+parse\+\_\+args()\hypertarget{namespacenegui_1_1pgdriveneestimator_abff5b751b69197ab0c78f53cf34e3a05}{}\label{namespacenegui_1_1pgdriveneestimator_abff5b751b69197ab0c78f53cf34e3a05}

\item 
list {\bfseries ls\+\_\+args\+\_\+passed} = \mbox{[}$\,$\mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_af517e995e63706b0e5297adb3a372e43}{}\label{namespacenegui_1_1pgdriveneestimator_af517e995e63706b0e5297adb3a372e43}

\item 
{\bfseries s\+\_\+argname} = s\+\_\+flag.\+replace( \char`\"{}-\/-\/\char`\"{}, \char`\"{}\char`\"{} )\hypertarget{namespacenegui_1_1pgdriveneestimator_af8fac37bc1806ab9f054b8c4754e669e}{}\label{namespacenegui_1_1pgdriveneestimator_af8fac37bc1806ab9f054b8c4754e669e}

\item 
{\bfseries s\+\_\+val} = getattr( o\+\_\+args, s\+\_\+argname )\hypertarget{namespacenegui_1_1pgdriveneestimator_a801907b0dbfc713d2a817781f2b3c7d4}{}\label{namespacenegui_1_1pgdriveneestimator_a801907b0dbfc713d2a817781f2b3c7d4}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Description

given 
    -->a list of genepop files, 
    -->a list of percentages of the total indiv
       to subsample
    --> a number giving a minimum pop size 
       after subsampling
    -->a minimum allele frequency (single float)
    --> a number giving the total replicate NeEstimator runs 
to be executed on each file at each subsample percentage 

    subsamples and then runs the Ne estimator for each combination of 
    genepop_file,percentage,replicate_number. 
    
    As of Fri May 13 19:01:06 MDT 2016, still not sure
    how best to get the results to file or stream.

Mon Aug 15 20:04:00 MDT 2016
    revised so that now args list includes
    -->a list of genepop files, 
    -->one of [percent|remove] (names a subsampling scheme, to be enlarged)
    -->a list of percentages, for percent samplin, or N-values for removing N
from the individuals    
    --> a number giving a minimum pop size 
       after subsampling (fewer than the min count of indiv, and the pop is skipped)
    -->a minimum allele frequency (single float)
    --> a number giving the total replicate NeEstimator runs 
to be executed on each file at each subsample percentage 
    -->optional the number of processes to create in performing the
estimates in parallele, on process for each population (as divided up inside a file,
or as given by a signle genepop file with only one population listed)
    
    Also revised to allow the improtation of this mod, so that the same operations
    can be intitiated by a call to "mymain".  The importation method allows for 
    passing in two file objects, open for writing.  The console method, that satisfies
    "if __name__== "__main__", does not allow the file object args and prints to stdout and stderr.

Wed Sep  7 18:12:26 MDT 2016
    revised so that now args list includes
    -->a list of genepop files, 
    -->one of [percent|remove|criteria] (names a subsampling scheme, to be enlarged)
    -->a list of comma-delimited percentages, for percent samplin, or N-values for removing N
from the individuals, or, for criteria, a comma-delimited list consisting of:
        1. list of semicolong-delimited genepop indiv id fields (example "numberage;sex;parent")
        2. list of python types corresponding to each field (example "int;int;string")
        3. one or more test expressions using field names 
            surrounded by percentage signs.  For example, to include 
            2 criteria: "%age%>3 and %age%<6 and %sex% == 3","%parent% <= "3992"
    --> a number giving a minimum pop size 
       after subsampling (fewer than the min count of indiv, and the pop is skipped)
    -->a hypnated pair of numbers giving the minimum and maximum i where
i gives the ith population listed in any one of the genepop files. For
example to run the estimator only on the 2nd through the 10th population,
the arg would be: "2-10" (all subject to minimum pop size).  
Using "all" for this arg will result in all pops being included.
    -->a minimum allele frequency (single float)
    --> a number giving the total replicate NeEstimator runs 
to be executed on each file at each subsample percentage 
    -->optional the number of processes to create in performing the
estimates in parallele, on process for each population (as divided up inside a file,
or as given by a signle genepop file with only one population listed)

2016_09_24
    Revisions to add new sampling schemes (No-subsampling, and AgeStructureNe schemes to get
    cohorts and siblings (Relateds).  In addition to the percent, remove, and
    criteria schemes, we add "none", "cohorts", and "relateds" as options for arg 2.
    For arg 3 we now add, if cohorts is the second arg value, comma-delimited
    fields (see mod genepopfilesampler.py, class 
    GenepopFileSamplerParamsAgeStructureCohorts):
    --> int, max individual age
    And, if "relateds" is the 2nd arg value (see mod genepopfilesampler.py, class
    GenepopFileSamplerIndividualsAgeStructureRelateds):
    1. float, percent of relateds each gen
    Also added max pop size as new arg, now arg #
2016_10_20
    Adding to Loci scheme "percent," to subsample a percentage
    of the loci (as circumscribed by existing params min loci 
    position and max loci position.
\end{DoxyVerb}
 

\subsection{Function Documentation}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate@{add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate}}
\index{add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate@{add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate(o\+\_\+genepopfile, s\+\_\+sample\+\_\+scheme, s\+\_\+loci\+\_\+subsample\+\_\+tag, f\+\_\+min\+\_\+allele\+\_\+freq, i\+\_\+min\+\_\+pop\+\_\+size, i\+\_\+max\+\_\+pop\+\_\+size, o\+\_\+debug\+\_\+mode, llv\+\_\+args\+\_\+each\+\_\+process, I\+D\+X\+\_\+\+N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+I\+P, o\+\_\+secondary\+\_\+outfile)}{add_to_set_of_calls_to_do_estimate(o_genepopfile, s_sample_scheme, s_loci_subsample_tag, f_min_allele_freq, i_min_pop_size, i_max_pop_size, o_debug_mode, llv_args_each_process, IDX_NE_ESTIMATOR_OUTPUT_FIELDS_TO_SKIP, o_secondary_outfile)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate (
\begin{DoxyParamCaption}
\item[{}]{o\+\_\+genepopfile, }
\item[{}]{s\+\_\+sample\+\_\+scheme, }
\item[{}]{s\+\_\+loci\+\_\+subsample\+\_\+tag, }
\item[{}]{f\+\_\+min\+\_\+allele\+\_\+freq, }
\item[{}]{i\+\_\+min\+\_\+pop\+\_\+size, }
\item[{}]{i\+\_\+max\+\_\+pop\+\_\+size, }
\item[{}]{o\+\_\+debug\+\_\+mode, }
\item[{}]{llv\+\_\+args\+\_\+each\+\_\+process, }
\item[{}]{I\+D\+X\+\_\+\+N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+IP, }
\item[{}]{o\+\_\+secondary\+\_\+outfile}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_ab0bca56261e2d7951b4c7a65897ee053}{}\label{namespacenegui_1_1pgdriveneestimator_ab0bca56261e2d7951b4c7a65897ee053}
\begin{DoxyVerb}This def creates ne-estimator caller object and adds it to list of args for a single call
to def do_estimate.  The call is then appended to llv_args_each_process
\end{DoxyVerb}
 

Definition at line 1440 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
1440                         o\_secondary\_outfile ):
1441     \textcolor{stringliteral}{'''     }
1442 \textcolor{stringliteral}{    This def creates ne-estimator caller object and adds it to list of args for a single call}
1443 \textcolor{stringliteral}{    to def do\_estimate.  The call is then appended to llv\_args\_each\_process}
1444 \textcolor{stringliteral}{    '''}
1445 
1446     \textcolor{comment}{#all these GenepopFileManager objects should now have}
1447     \textcolor{comment}{#a single population sample name:}
1448     s\_population\_sample\_name=o\_genepopfile.population\_subsample\_tags[ 0 ]
1449 
1450     ls\_indiv\_sample\_names=o\_genepopfile.indiv\_subsample\_tags
1451 
1452     li\_population\_numbers=o\_genepopfile.getListPopulationNumbers( s\_population\_sample\_name )
1453     \textcolor{comment}{#for each sample (i.e. for each replicate of a sampling with a given set of params:}
1454     \textcolor{keywordflow}{for} s\_indiv\_sample \textcolor{keywordflow}{in} ls\_indiv\_sample\_names:
1455 
1456         \textcolor{comment}{#we also check that at least one pop has at least one individual}
1457         \textcolor{comment}{#listed for this subsample}
1458         li\_indiv\_counts\_for\_this\_sample=o\_genepopfile.getIndividualCounts( s\_indiv\_subsample\_tag=
      s\_indiv\_sample )
1459     
1460         \textcolor{keywordflow}{if} sum( li\_indiv\_counts\_for\_this\_sample ) == 0:
1461             v\_sample\_value, i\_replicate\_count=get\_sample\_val\_and\_rep\_number\_from\_sample\_name( \(\backslash\)
1462                                             s\_indiv\_sample, s\_sample\_scheme )
1463             \textcolor{comment}{#we only want to report the first replicate}
1464             \textcolor{comment}{#(by inference of course all replicates will be skipped:}
1465             \textcolor{keywordflow}{if} i\_replicate\_count == 0:
1466                 s\_msg=\textcolor{stringliteral}{"Skipping samples from: "} \(\backslash\)
1467                         + o\_genepopfile.original\_file\_name \(\backslash\)
1468                         + \textcolor{stringliteral}{".  In pgdriveneestimator.py, all populations "} \(\backslash\)
1469                         + \textcolor{stringliteral}{"have zero individuals when sampled using "} \(\backslash\)
1470                         + \textcolor{stringliteral}{"scheme: "} + s\_sample\_scheme \(\backslash\)
1471                         + \textcolor{stringliteral}{", and with sample parameter, "} + str( v\_sample\_value ) + \textcolor{stringliteral}{"."}
1472                 o\_secondary\_outfile.write( s\_msg + \textcolor{stringliteral}{"\(\backslash\)n"} )
1473             \textcolor{comment}{#end if first replicate, report}
1474             \textcolor{keywordflow}{continue}
1475         \textcolor{comment}{#end skip this subsample if no pops have any individuals}
1476 
1477         \textcolor{stringliteral}{'''}
1478 \textcolor{stringliteral}{        For percent and remove-N schemes, the min/max pop size params are not }
1479 \textcolor{stringliteral}{        enforced in the sampler, and, as of 2016\_09\_27, are to be applied}
1480 \textcolor{stringliteral}{        before sampling.  Thus, for these scheme we skip populations if their }
1481 \textcolor{stringliteral}{        original, un-subsampled size is outside the pop size range.  Other schemes}
1482 \textcolor{stringliteral}{        should have applied the criteria when subsampling.  For the latter, this}
1483 \textcolor{stringliteral}{        would not be an appropriate test::}
1484 \textcolor{stringliteral}{        '''}
1485 
1486         li\_pops\_with\_invalid\_size=[]
1487         
1488         \textcolor{keywordflow}{if} s\_sample\_scheme \textcolor{keywordflow}{in} SAMPLE\_SCHEMES\_NON\_CRITERIA:
1489             li\_pops\_with\_invalid\_size=\hyperlink{namespacenegui_1_1pgdriveneestimator_ab546af99f06d3ec795da61f806ffafa9}{get\_pops\_in\_file\_outside\_valid\_size\_range}
      ( o\_genepopfile, 
1490                                                                                 i\_min\_pop\_size,
1491                                                                                 i\_max\_pop\_size )
1492         \textcolor{comment}{#end if we need to check original (non-sampled) pop sizes}
1493 
1494         \textcolor{stringliteral}{'''}
1495 \textcolor{stringliteral}{        To most-efficiently use multi-processes, that is, to assign many}
1496 \textcolor{stringliteral}{        processes a single file with many populations, we do an}
1497 \textcolor{stringliteral}{        estimate on each pop in the file separately, and divvy}
1498 \textcolor{stringliteral}{        the pops up among processes:}
1499 \textcolor{stringliteral}{        '''}
1500         \textcolor{keywordflow}{for} i\_population\_number \textcolor{keywordflow}{in} li\_population\_numbers:
1501 
1502             \textcolor{keywordflow}{if} i\_population\_number \textcolor{keywordflow}{in} li\_pops\_with\_invalid\_size:
1503                 s\_msg= \textcolor{stringliteral}{"In pgdriveneestimator.py, def add\_to\_set\_of\_calls\_to\_do\_estimate, "} \(\backslash\)
1504                                 + \textcolor{stringliteral}{" in file, "} + o\_genepopfile.original\_file\_name \(\backslash\)
1505                                 + \textcolor{stringliteral}{", skipping pop number, "}  + str( i\_population\_number ) \(\backslash\)
1506                                 + \textcolor{stringliteral}{".  It has an indiv count outside of valid "} \(\backslash\)
1507                                 + \textcolor{stringliteral}{"range, "} + str( i\_min\_pop\_size ) \(\backslash\)
1508                                 + \textcolor{stringliteral}{" - "} + str( i\_max\_pop\_size ) + \textcolor{stringliteral}{"."}
1509                 o\_secondary\_outfile.write( s\_msg + \textcolor{stringliteral}{"\(\backslash\)n"} )
1510                 \textcolor{keywordflow}{continue}
1511             \textcolor{comment}{#end if i\_population\_number is}
1512 
1513             \textcolor{comment}{#for downstream analysis, we get the census of total indiv}
1514             \textcolor{comment}{#non-sampled, for this pop section:}
1515             s\_census=str( o\_genepopfile.getIndividualCount( i\_population\_number ) )
1516 
1517             \textcolor{comment}{#we make population subsample list consisting of only this populations number:}
1518             s\_this\_pop\_number=str( i\_population\_number ) 
1519 
1520             o\_genepopfile.subsamplePopulationsByList( [ i\_population\_number ], s\_this\_pop\_number )
1521 
1522             \textcolor{keywordflow}{if} o\_debug\_mode.isSet( DebugMode.PRINT\_REPLICATE\_SELECTIONS ):
1523                 print\_test\_list\_replicate\_selection\_indices( o\_genepopfile, 
1524                                         s\_sample\_scheme,    
1525                                         s\_indiv\_sample, 
1526                                         o\_secondary\_outfile, 
1527                                         s\_population\_subsample\_tag=s\_this\_pop\_number )
1528             \textcolor{comment}{#end if we're testing, print }
1529             
1530 
1531             \textcolor{comment}{#in naming a the genepop file for the subsampled pop,}
1532             \textcolor{comment}{#some processing is needed to avoid NeEstimator file naming errors, and}
1533             \textcolor{comment}{#path mangling, so we made a separate def:}
1534             s\_genepop\_file\_subsample=\hyperlink{namespacenegui_1_1pgdriveneestimator_a84955fc339f0354149185b5fa6444340}{get\_subsample\_genepop\_file\_name}( 
      o\_genepopfile.original\_file\_name, 
1535                                                     s\_indiv\_sample, 
1536                                                     s\_this\_pop\_number )
1537 
1538             i\_sample\_value, i\_replicate\_number= \(\backslash\)
1539                         get\_sample\_val\_and\_rep\_number\_from\_sample\_name( s\_indiv\_sample, s\_sample\_scheme )
1540 
1541             s\_run\_output\_file=s\_genepop\_file\_subsample + \textcolor{stringliteral}{"\_ne\_run.txt"}
1542 
1543             o\_neinput=pgin.PGInputNeEstimator( s\_genepop\_file\_subsample )
1544 
1545             o\_neinput.run\_params=\{ \textcolor{stringliteral}{"crits"}:[ f\_min\_allele\_freq ]  \}
1546 
1547             o\_neoutput=pgout.PGOutputNeEstimator( s\_genepop\_file\_subsample, s\_run\_output\_file ) 
1548 
1549             o\_ne\_estimator=pgne.PGOpNeEstimator( o\_neinput, o\_neoutput ) 
1550             
1551             \textcolor{stringliteral}{'''}
1552 \textcolor{stringliteral}{            We send to def do\_estimate the genepop file object, o\_genepopfile, and the subsample tag}
1553 \textcolor{stringliteral}{            that identifies the correct subsample calculated and stored in the object, so we can write}
1554 \textcolor{stringliteral}{            each subsample genepop file in the same process that will use it as input to the the estimator.}
1555 \textcolor{stringliteral}{            This should limit the number of input files existing concurrenty in the directory to the }
1556 \textcolor{stringliteral}{            number of processes in use.  We also send allele freq, and the original genepop file name }
1557 \textcolor{stringliteral}{            inside the genepop file manager object):}
1558 \textcolor{stringliteral}{            '''}
1559 
1560             v\_sample\_value, i\_replicate\_number = \(\backslash\)
1561                     get\_sample\_val\_and\_rep\_number\_from\_sample\_name( s\_indiv\_sample, s\_sample\_scheme )
1562 
1563             lv\_these\_args = [ o\_genepopfile,  
1564                                 o\_ne\_estimator, 
1565                                 v\_sample\_value, 
1566                                 f\_min\_allele\_freq, 
1567                                 s\_indiv\_sample, 
1568                                 s\_loci\_subsample\_tag,
1569                                 s\_this\_pop\_number, 
1570                                 s\_census,
1571                                 i\_replicate\_number, 
1572                                 o\_debug\_mode,
1573                                 IDX\_NE\_ESTIMATOR\_OUTPUT\_FIELDS\_TO\_SKIP ]
1574 
1575             llv\_args\_each\_process.append( lv\_these\_args )
1576         \textcolor{comment}{#end for each population}
1577     \textcolor{comment}{#end for each sample name}
1578     \textcolor{keywordflow}{return}
1579 \textcolor{comment}{#end add\_to\_set\_of\_calls\_to\_do\_estimate}
1580 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!do\+\_\+sample@{do\+\_\+sample}}
\index{do\+\_\+sample@{do\+\_\+sample}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{do\+\_\+sample(o\+\_\+genepopfile, i\+\_\+min\+\_\+pop\+\_\+range, i\+\_\+max\+\_\+pop\+\_\+range, i\+\_\+min\+\_\+pop\+\_\+size, i\+\_\+max\+\_\+pop\+\_\+size, s\+\_\+sample\+\_\+scheme, lv\+\_\+sample\+\_\+values, i\+\_\+replicates, s\+\_\+loci\+\_\+sampling\+\_\+scheme, v\+\_\+loci\+\_\+sampling\+\_\+scheme\+\_\+param, i\+\_\+min\+\_\+loci\+\_\+position, i\+\_\+max\+\_\+loci\+\_\+position, i\+\_\+max\+\_\+total\+\_\+loci)}{do_sample(o_genepopfile, i_min_pop_range, i_max_pop_range, i_min_pop_size, i_max_pop_size, s_sample_scheme, lv_sample_values, i_replicates, s_loci_sampling_scheme, v_loci_sampling_scheme_param, i_min_loci_position, i_max_loci_position, i_max_total_loci)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+do\+\_\+sample (
\begin{DoxyParamCaption}
\item[{}]{o\+\_\+genepopfile, }
\item[{}]{i\+\_\+min\+\_\+pop\+\_\+range, }
\item[{}]{i\+\_\+max\+\_\+pop\+\_\+range, }
\item[{}]{i\+\_\+min\+\_\+pop\+\_\+size, }
\item[{}]{i\+\_\+max\+\_\+pop\+\_\+size, }
\item[{}]{s\+\_\+sample\+\_\+scheme, }
\item[{}]{lv\+\_\+sample\+\_\+values, }
\item[{}]{i\+\_\+replicates, }
\item[{}]{s\+\_\+loci\+\_\+sampling\+\_\+scheme, }
\item[{}]{v\+\_\+loci\+\_\+sampling\+\_\+scheme\+\_\+param, }
\item[{}]{i\+\_\+min\+\_\+loci\+\_\+position, }
\item[{}]{i\+\_\+max\+\_\+loci\+\_\+position, }
\item[{}]{i\+\_\+max\+\_\+total\+\_\+loci}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a8b8feb1e5b7dcf5e546b4bbdcebb59a8}{}\label{namespacenegui_1_1pgdriveneestimator_a8b8feb1e5b7dcf5e546b4bbdcebb59a8}
\begin{DoxyVerb}do_sample adds subsample info to the o_genepopfile GenepopFileManager object,
and so changes it in place, returns no value.  The o_genepopfile can then
be accessed to write a new genepop file that contains the subsampled data.
sampler requires a population list (in case we want to sample fewer than
all the pops in the file). If the client passed in "all" parse_args
will have assigned None to both min and max.
\end{DoxyVerb}
 

Definition at line 1117 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
1117                 i\_max\_total\_loci ):
1118 
1119     \textcolor{stringliteral}{'''}
1120 \textcolor{stringliteral}{    do\_sample adds subsample info to the o\_genepopfile GenepopFileManager object,}
1121 \textcolor{stringliteral}{    and so changes it in place, returns no value.  The o\_genepopfile can then}
1122 \textcolor{stringliteral}{    be accessed to write a new genepop file that contains the subsampled data.}
1123 \textcolor{stringliteral}{    sampler requires a population list (in case we want to sample fewer than}
1124 \textcolor{stringliteral}{    all the pops in the file). If the client passed in "all" parse\_args}
1125 \textcolor{stringliteral}{    will have assigned None to both min and max.}
1126 \textcolor{stringliteral}{    '''}
1127 
1128     i\_total\_pops\_in\_file=o\_genepopfile.pop\_total
1129     li\_population\_list=\textcolor{keywordtype}{None}
1130 
1131     \textcolor{keywordflow}{if} i\_min\_pop\_range \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
1132         \textcolor{comment}{#make sure both are None, else}
1133         \textcolor{comment}{#arg-parsing error:}
1134         \textcolor{keywordflow}{if} i\_max\_pop\_range \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
1135             li\_population\_list=list( range( 1, i\_total\_pops\_in\_file + 1 ) )
1136         \textcolor{keywordflow}{else}:
1137             s\_msg=\textcolor{stringliteral}{"In pgdriveneestimator.py, def do\_sample, "} \(\backslash\)
1138                         + \textcolor{stringliteral}{" found arg min pop range is None, "} \(\backslash\)
1139                         + \textcolor{stringliteral}{" but max pop range is not None, "} \(\backslash\)
1140                         + str( i\_max\_pop\_range ) \(\backslash\)
1141                         + \textcolor{stringliteral}{".  Invalid argument pair."}
1142             \textcolor{keywordflow}{raise} Exception( s\_msg )
1143         \textcolor{comment}{#end if max is None else error}
1144     \textcolor{keywordflow}{else}:
1145         \textcolor{keywordflow}{if} i\_min\_pop\_range < 1 \textcolor{keywordflow}{or} i\_min\_pop\_range > i\_max\_pop\_range:
1146             s\_msg=\textcolor{stringliteral}{"In pgdriveneestimator.py, def do\_sample, "} \(\backslash\)
1147                         + \textcolor{stringliteral}{"min pop number range, "} \(\backslash\)
1148                         + str( i\_min\_pop\_range ) \(\backslash\)
1149                         + \textcolor{stringliteral}{", is less than one or "} \(\backslash\)
1150                         + \textcolor{stringliteral}{"greaterh than max pop number, "} \(\backslash\)
1151                         + str( i\_max\_pop\_range ) + \textcolor{stringliteral}{"."} 
1152             \textcolor{keywordflow}{raise} Exception( s\_msg )
1153         \textcolor{comment}{#end if min or max out of range}
1154 
1155         i\_max\_pop\_range=min( i\_max\_pop\_range, i\_total\_pops\_in\_file )
1156 
1157         li\_population\_list=range( i\_min\_pop\_range, i\_max\_pop\_range + 1 )
1158     \textcolor{comment}{#end if min pop range is None, else have a value}
1159 
1160     o\_sampler=\textcolor{keywordtype}{None}  
1161 
1162     s\_population\_subsample\_tag=s\_sample\_scheme
1163 
1164     \textcolor{keywordflow}{if} s\_sample\_scheme==SAMPLE\_BY\_NONE:
1165         o\_sample\_params=gps.GenepopFileSampleParamsNone( li\_population\_numbers=li\_population\_list,
1166                                                             i\_min\_pop\_size=i\_min\_pop\_size,
1167                                                             i\_max\_pop\_size=i\_max\_pop\_size,
1168                                                             i\_replicates=i\_replicates,
1169                                                             s\_population\_subsample\_name=
      s\_population\_subsample\_tag )    
1170 
1171         o\_sampler=gps.GenepopFileSamplerNone( o\_genepopfile, o\_sample\_params )
1172 
1173     \textcolor{keywordflow}{elif} s\_sample\_scheme==SAMPLE\_BY\_PERCENTAGES:
1174 
1175         \textcolor{comment}{#our "proportion" sampler object needs proportions instead of percentages:}
1176 
1177         o\_sample\_params=gps.GenepopFileSampleParamsProportion( li\_population\_numbers=li\_population\_list,
1178                                                 lf\_proportions=lv\_sample\_values,
1179                                                 i\_replicates=i\_replicates,
1180                                                 s\_population\_subsample\_name=s\_population\_subsample\_tag )
1181 
1182         o\_sampler=gps.GenepopFileSamplerIndividualsByProportion( o\_genepopfile, o\_sample\_params )
1183 
1184     \textcolor{keywordflow}{elif} s\_sample\_scheme==SAMPLE\_BY\_REMOVAL:
1185 
1186         o\_sample\_params=gps.GenepopFileSampleParamsRemoval( li\_population\_numbers=li\_population\_list,
1187                                                 li\_n\_to\_remove=lv\_sample\_values,
1188                                                 i\_replicates=i\_replicates,
1189                                                 s\_population\_subsample\_name=s\_population\_subsample\_tag )
1190 
1191         o\_sampler=gps.GenepopFileSamplerIndividualsByRemoval( o\_genepopfile, o\_sample\_params )
1192 
1193     \textcolor{keywordflow}{elif} s\_sample\_scheme==SAMPLE\_BY\_CRITERIA:
1194 
1195         o\_indiv\_fields, o\_criteria = get\_criteria\_sampling\_params( lv\_sample\_values )
1196 
1197         o\_sample\_params=gps.GenepopFileSampleParamsCriteria( o\_genepop\_indiv\_id\_fields=o\_indiv\_fields,
1198                                                                     o\_genepop\_indiv\_id\_critera=o\_criteria,
1199                                                                     li\_population\_numbers=
      li\_population\_list,
1200                                                                     i\_min\_sampled\_pop\_size=i\_min\_pop\_size,
1201                                                                     i\_max\_sampled\_pop\_size=i\_max\_pop\_size,
1202                                                                     s\_population\_subsample\_name = 
      s\_population\_subsample\_tag,
1203                                                                     i\_replicates=i\_replicates )
1204 
1205         o\_sampler=gps.GenepopFileSamplerIndividualsByCriteria( o\_genepopfile, o\_sample\_params )
1206 
1207     \textcolor{keywordflow}{elif} s\_sample\_scheme==SAMPLE\_BY\_COHORT:
1208 
1209         ( o\_indiv\_fields,
1210             i\_max\_age ) = get\_cohorts\_sampling\_params( lv\_sample\_values )
1211 
1212         o\_sample\_params=gps.GenepopFileSampleParamsAgeStructureCohorts( \(\backslash\)
1213                                         o\_genepop\_indiv\_id\_fields = o\_indiv\_fields,
1214                                         li\_population\_numbers = li\_population\_list,
1215                                         i\_max\_age=i\_max\_age,
1216                                         i\_min\_individuals\_per\_gen=i\_min\_pop\_size,
1217                                         i\_max\_individuals\_per\_gen=i\_max\_pop\_size,
1218                                         i\_replicates=i\_replicates )
1219 
1220         o\_sampler=gps.GenepopFileSamplerIndividualsAgeStructureCohorts( o\_genepopfile,
1221                                                                     o\_sample\_params )
1222     \textcolor{keywordflow}{elif} s\_sample\_scheme==SAMPLE\_BY\_COHORT\_PERCENTAGE:
1223 
1224         \textcolor{comment}{#this scheme has params identical to the regular "cohorts" scheme,}
1225         \textcolor{comment}{#with a percentage value appended to the max-age param, so we extract}
1226         \textcolor{comment}{#the last two values of the last param list:    }
1227         
1228         COHORT\_PARAM\_LIST\_DELIMITER=\textcolor{stringliteral}{";"}
1229         IDX\_MAX\_AGE=0
1230         IDX\_PERC=1
1231 
1232         s\_last\_param=lv\_sample\_values[ -1 ]
1233 
1234         ls\_age\_and\_percentage=s\_last\_param.split( \(\backslash\)
1235                         COHORT\_PARAM\_LIST\_DELIMITER )
1236 
1237         s\_max\_age=ls\_age\_and\_percentage[ IDX\_MAX\_AGE ]
1238         s\_percentage=ls\_age\_and\_percentage[ IDX\_PERC ]
1239         
1240 
1241         \textcolor{comment}{#we reassemble the list to match the expected}
1242         \textcolor{comment}{#cohort sampling params (without the percentage):}
1243         lv\_cohort\_param\_fields=lv\_sample\_values[ 0:len( lv\_sample\_values ) - 1 ] \(\backslash\)
1244                                                             + [ s\_max\_age ]     
1245         \textcolor{comment}{#Convert the percentage to a proportion:}
1246         f\_proportion=float( s\_percentage )/100.0
1247 
1248         ( o\_indiv\_fields,
1249                 i\_max\_age ) = get\_cohorts\_sampling\_params( lv\_cohort\_param\_fields )
1250 
1251         o\_sample\_params=gps.GenepopFileSampleParamsAgeStructureCohorts( \(\backslash\)
1252                                             o\_genepop\_indiv\_id\_fields = o\_indiv\_fields,
1253                                             li\_population\_numbers = li\_population\_list,
1254                                             i\_max\_age=i\_max\_age,
1255                                             f\_proportion=f\_proportion,
1256                                             i\_min\_individuals\_per\_gen=i\_min\_pop\_size,
1257                                             i\_max\_individuals\_per\_gen=i\_max\_pop\_size,
1258                                             i\_replicates=i\_replicates )
1259 
1260         o\_sampler=gps.GenepopFileSamplerIndividualsAgeStructureCohortsPercentage( o\_genepopfile,
1261                                                                                     o\_sample\_params )
1262                                 
1263     \textcolor{keywordflow}{elif} s\_sample\_scheme==SAMPLE\_BY\_RELATEDS:
1264 
1265             ( o\_indiv\_fields,
1266                 f\_percent\_relateds) = get\_relateds\_sampling\_params( lv\_sample\_values )
1267 
1268             o\_sample\_params=gps.GenepopFileSampleParamsAgeStructureRelateds( \(\backslash\)
1269                                         o\_genepop\_indiv\_id\_fields = o\_indiv\_fields,
1270                                         li\_population\_numbers = li\_population\_list,
1271                                         f\_percent\_relateds\_per\_gen=f\_percent\_relateds,
1272                                         i\_min\_individuals\_per\_gen=i\_min\_pop\_size,
1273                                         i\_max\_individuals\_per\_gen=i\_max\_pop\_size,
1274                                         i\_replicates=i\_replicates )
1275 
1276             o\_sampler=gps.GenepopFileSamplerIndividualsAgeStructureRelateds( o\_genepopfile,
1277                                                                     o\_sample\_params )
1278     \textcolor{keywordflow}{else}:
1279 
1280         s\_msg=\textcolor{stringliteral}{"In pgdriveneestimator.py, def do\_sample, "} \(\backslash\)
1281                 + \textcolor{stringliteral}{"unknown sampling scheme: "} \(\backslash\)
1282                 + s\_sample\_scheme + \textcolor{stringliteral}{"."}
1283         \textcolor{keywordflow}{raise} Exception( s\_msg )
1284     \textcolor{comment}{#end if percent, else removal, else criteria, else cohort, else relateds, else error}
1285 
1286     o\_sampler.doSample()
1287 
1288     \textcolor{comment}{#we also want to sample loci for each replicate:}
1289     \hyperlink{namespacenegui_1_1pgdriveneestimator_afe018505bc1f9a64aa804139954ae5f1}{do\_sample\_loci}( o\_genepopfile,
1290                     s\_loci\_sampling\_scheme,
1291                     v\_loci\_sampling\_scheme\_param,
1292                     i\_min\_loci\_position,
1293                     i\_max\_loci\_position,
1294                     i\_max\_total\_loci,
1295                     li\_population\_list )
1296 
1297     \textcolor{keywordflow}{return}
1298 \textcolor{comment}{#end do\_sample}
1299 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!do\+\_\+sample\+\_\+loci@{do\+\_\+sample\+\_\+loci}}
\index{do\+\_\+sample\+\_\+loci@{do\+\_\+sample\+\_\+loci}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{do\+\_\+sample\+\_\+loci(o\+\_\+genepopfile, s\+\_\+loci\+\_\+sampling\+\_\+scheme, v\+\_\+loci\+\_\+sampling\+\_\+scheme\+\_\+param, i\+\_\+min\+\_\+loci\+\_\+position, i\+\_\+max\+\_\+loci\+\_\+position, i\+\_\+max\+\_\+total\+\_\+loci, li\+\_\+population\+\_\+list)}{do_sample_loci(o_genepopfile, s_loci_sampling_scheme, v_loci_sampling_scheme_param, i_min_loci_position, i_max_loci_position, i_max_total_loci, li_population_list)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+do\+\_\+sample\+\_\+loci (
\begin{DoxyParamCaption}
\item[{}]{o\+\_\+genepopfile, }
\item[{}]{s\+\_\+loci\+\_\+sampling\+\_\+scheme, }
\item[{}]{v\+\_\+loci\+\_\+sampling\+\_\+scheme\+\_\+param, }
\item[{}]{i\+\_\+min\+\_\+loci\+\_\+position, }
\item[{}]{i\+\_\+max\+\_\+loci\+\_\+position, }
\item[{}]{i\+\_\+max\+\_\+total\+\_\+loci, }
\item[{}]{li\+\_\+population\+\_\+list}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_afe018505bc1f9a64aa804139954ae5f1}{}\label{namespacenegui_1_1pgdriveneestimator_afe018505bc1f9a64aa804139954ae5f1}
\begin{DoxyVerb}As of 2016_10_06, we have no loci sampling scheme
but we still subsample by loci order, start index, stop index
and a max total -- randomly drawn if the start/stop range
results in total loci over the max. 

Further, we currently only permit one loci subsample for
each individual subsampling session -- i.e. for all 
of a given sample replicate.

As of 2016_10_20, we've added new scheme "percent", but
still doing one sample in the genepop file per call
to this def, which now still means one loci sample will
be applied to all replicate indiv samples.
\end{DoxyVerb}
 

Definition at line 1306 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
1306                         li\_population\_list ):
1307         
1308     \textcolor{stringliteral}{'''}
1309 \textcolor{stringliteral}{    As of 2016\_10\_06, we have no loci sampling scheme}
1310 \textcolor{stringliteral}{    but we still subsample by loci order, start index, stop index}
1311 \textcolor{stringliteral}{    and a max total -- randomly drawn if the start/stop range}
1312 \textcolor{stringliteral}{    results in total loci over the max. }
1313 \textcolor{stringliteral}{}
1314 \textcolor{stringliteral}{    Further, we currently only permit one loci subsample for}
1315 \textcolor{stringliteral}{    each individual subsampling session -- i.e. for all }
1316 \textcolor{stringliteral}{    of a given sample replicate.}
1317 \textcolor{stringliteral}{}
1318 \textcolor{stringliteral}{    As of 2016\_10\_20, we've added new scheme "percent", but}
1319 \textcolor{stringliteral}{    still doing one sample in the genepop file per call}
1320 \textcolor{stringliteral}{    to this def, which now still means one loci sample will}
1321 \textcolor{stringliteral}{    be applied to all replicate indiv samples.}
1322 \textcolor{stringliteral}{    '''}
1323 
1324 
1325     \textcolor{keywordflow}{if} s\_loci\_sampling\_scheme == SAMPLE\_LOCI\_SCHEME\_NONE:
1326 
1327         \textcolor{stringliteral}{'''}
1328 \textcolor{stringliteral}{        note that we'er subsampleing once for each indiv subsample:}
1329 \textcolor{stringliteral}{        which will give us one loci subsampling for each indiv subsample}
1330 \textcolor{stringliteral}{        '''}
1331         o\_sample\_params=gps.GenepopFileSampleParamsLoci( \(\backslash\)
1332                                     li\_population\_numbers=li\_population\_list,
1333                                     i\_min\_loci\_position=i\_min\_loci\_position,
1334                                     i\_max\_loci\_position=i\_max\_loci\_position,
1335                                     i\_max\_total\_loci=i\_max\_total\_loci,
1336                                     i\_replicates=1,
1337                                     s\_sample\_tag=DEFAULT\_LOCI\_SAMPLE\_TAG )
1338 
1339         o\_sampler=gps.GenepopFileSamplerLociByRangeAndTotal( o\_genepopfile,
1340                         o\_sample\_params )
1341                                                     
1342     \textcolor{keywordflow}{elif} s\_loci\_sampling\_scheme == SAMPLE\_LOCI\_SCHEME\_PERCENT:
1343         \textcolor{stringliteral}{'''}
1344 \textcolor{stringliteral}{        For the percent scheme, the Loci sample params include}
1345 \textcolor{stringliteral}{        a "proportion" value, which defaults to None, and is not }
1346 \textcolor{stringliteral}{        used above (for example) by the "none" scheme, but is accessed}
1347 \textcolor{stringliteral}{        by the sampler we use here.}
1348 \textcolor{stringliteral}{        '''}
1349 
1350         o\_sample\_params=gps.GenepopFileSampleParamsLoci( \(\backslash\)
1351                                                 li\_population\_numbers=li\_population\_list,
1352                                                 i\_min\_loci\_position=i\_min\_loci\_position,
1353                                                 i\_max\_loci\_position=i\_max\_loci\_position,
1354                                                 f\_proportion=v\_loci\_sampling\_scheme\_param,
1355                                                 i\_replicates=1,
1356                                                 s\_sample\_tag=DEFAULT\_LOCI\_SAMPLE\_TAG )
1357         o\_sampler=gps.GenepopFileSamplerLociByRangeAndPercentage( o\_genepopfile,
1358                                                                     o\_sample\_params )
1359     \textcolor{keywordflow}{else}:
1360         s\_msg=\textcolor{stringliteral}{"In pgdriveneestimator.py, def do\_sample\_loci, "} \(\backslash\)
1361                     + \textcolor{stringliteral}{"unknown loci sampling scheme: "} \(\backslash\)
1362                     + s\_loci\_sampling\_scheme + \textcolor{stringliteral}{"."}
1363         \textcolor{keywordflow}{raise} Exception( s\_msg )
1364     \textcolor{comment}{#end if sampling scheme none else unknown}
1365 
1366     o\_sampler.doSample()
1367     \textcolor{keywordflow}{return}
1368 \textcolor{comment}{#end do\_sample\_loci}
1369 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!get\+\_\+genepop\+\_\+file\+\_\+list@{get\+\_\+genepop\+\_\+file\+\_\+list}}
\index{get\+\_\+genepop\+\_\+file\+\_\+list@{get\+\_\+genepop\+\_\+file\+\_\+list}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{get\+\_\+genepop\+\_\+file\+\_\+list(s\+\_\+genepop\+\_\+files\+\_\+arg)}{get_genepop_file_list(s_genepop_files_arg)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+get\+\_\+genepop\+\_\+file\+\_\+list (
\begin{DoxyParamCaption}
\item[{}]{s\+\_\+genepop\+\_\+files\+\_\+arg}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a15b09d2967ec4812353b0e146f074799}{}\label{namespacenegui_1_1pgdriveneestimator_a15b09d2967ec4812353b0e146f074799}
\begin{DoxyVerb}if invoked from the console the arg is a glob expression
if invoked from the gui interface in pgguineestimator.py,
the arg is a list, such that eval will genreate a python
list of strings.

This def assumes that no user will invoke this mod from 
the command line with a glob expression, includeing a file name,
that can be evaluated as a python list (i.e. "[ \"item\", \"item\" ... ]\end{DoxyVerb}
 

Definition at line 420 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
420 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_a15b09d2967ec4812353b0e146f074799}{get\_genepop\_file\_list}( s\_genepop\_files\_arg ):
421     \textcolor{stringliteral}{'''}
422 \textcolor{stringliteral}{    if invoked from the console the arg is a glob expression}
423 \textcolor{stringliteral}{    if invoked from the gui interface in pgguineestimator.py,}
424 \textcolor{stringliteral}{    the arg is a list, such that eval will genreate a python}
425 \textcolor{stringliteral}{    list of strings.}
426 \textcolor{stringliteral}{}
427 \textcolor{stringliteral}{    This def assumes that no user will invoke this mod from }
428 \textcolor{stringliteral}{    the command line with a glob expression, includeing a file name,}
429 \textcolor{stringliteral}{    that can be evaluated as a python list (i.e. "[ \(\backslash\)"item\(\backslash\)", \(\backslash\)"item\(\backslash\)" ... ]}
430 \textcolor{stringliteral}{    }
431 \textcolor{stringliteral}{    '''}
432 
433     ls\_files=\textcolor{keywordtype}{None}
434 
435     \textcolor{keywordflow}{try}:
436 
437         \textcolor{comment}{##### temp}
438         \textcolor{keywordflow}{print} ( \textcolor{stringliteral}{"in get\_genepop\_file\_list, type of arg: "} + str( type( s\_genepop\_files\_arg ) )  )
439         \textcolor{comment}{#####}
440         ls\_files=eval( s\_genepop\_files\_arg )
441 
442         \textcolor{keywordflow}{if} type( ls\_files ) != list:
443             \textcolor{comment}{#still could be a glob expression, for example,}
444             \textcolor{comment}{#of a file name that python can eval as an int or float,}
445             \textcolor{comment}{#so we'll just glob the orig:}
446 
447             ls\_files=glob.glob( s\_genepop\_files\_arg )
448         \textcolor{keywordflow}{else}:
449             \textcolor{comment}{#make sure it's a list of strings}
450             \textcolor{keywordflow}{if} not( file\_name\_list\_is\_all\_strings( ls\_files ) ):
451                 s\_msg=\textcolor{stringliteral}{"In pgdriveneestimator.py, def get\_genepop\_file\_list, "} \(\backslash\)
452                         + \textcolor{stringliteral}{"genepop file arg evaluated as a list, but, not composed "} \(\backslash\)
453                         + \textcolor{stringliteral}{"of strings: "} + str( list ) + \textcolor{stringliteral}{"."}
454                 \textcolor{keywordflow}{raise} Exception( s\_msg )
455             \textcolor{comment}{#end if not all strings in list}
456     \textcolor{keywordflow}{except} ( NameError, SyntaxError ) \textcolor{keyword}{as} evalfail:
457 
458         \textcolor{stringliteral}{'''}
459 \textcolor{stringliteral}{        this is caught if the eval fails due to }
460 \textcolor{stringliteral}{        the arg being a string.  Further, a syntax}
461 \textcolor{stringliteral}{        error results if the arg begins/ends in a wildcard}
462 \textcolor{stringliteral}{        "*" char -- as will happen often with a glob.}
463 \textcolor{stringliteral}{}
464 \textcolor{stringliteral}{        So for these eval failures we assume the arg }
465 \textcolor{stringliteral}{        is a glob expression}
466 \textcolor{stringliteral}{        '''}
467 
468         ls\_files=glob.glob( s\_genepop\_files\_arg )
469 
470     \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} unknown\_fail:
471         s\_errortype=type( unknown\_fail ).\_\_name\_\_
472         s\_msg=\textcolor{stringliteral}{"In pgdriveneestimator.py, def get\_genepop\_file\_list, "} \(\backslash\)
473                         + \textcolor{stringliteral}{"gene pop file arg, "} \(\backslash\)
474                         + str( s\_genepop\_files\_arg ) \(\backslash\)
475                         + \textcolor{stringliteral}{", eval operation produced "} \(\backslash\)
476                         + \textcolor{stringliteral}{"error of type "} + s\_errortype \(\backslash\)
477                         + \textcolor{stringliteral}{", with message, "} + str( unknown\_fail ) + \textcolor{stringliteral}{"."} 
478         \textcolor{keywordflow}{raise} Exception( s\_msg )
479     \textcolor{comment}{#end try eval, except name error, except other}
480 
481     \textcolor{keywordflow}{return} ls\_files
482 \textcolor{comment}{#end get\_genepop\_file\_list}
483 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!get\+\_\+invalid\+\_\+file\+\_\+names@{get\+\_\+invalid\+\_\+file\+\_\+names}}
\index{get\+\_\+invalid\+\_\+file\+\_\+names@{get\+\_\+invalid\+\_\+file\+\_\+names}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{get\+\_\+invalid\+\_\+file\+\_\+names(ls\+\_\+file\+\_\+names)}{get_invalid_file_names(ls_file_names)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+get\+\_\+invalid\+\_\+file\+\_\+names (
\begin{DoxyParamCaption}
\item[{}]{ls\+\_\+file\+\_\+names}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a944008262ae2ee7c6fc796499be626ce}{}\label{namespacenegui_1_1pgdriveneestimator_a944008262ae2ee7c6fc796499be626ce}
\begin{DoxyVerb}Currently only check is for file name
length (see comments above declaration of const 
MAX_GENEPOP_FILE_NAME_LENGTH.
\end{DoxyVerb}
 

Definition at line 379 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
379 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_a944008262ae2ee7c6fc796499be626ce}{get\_invalid\_file\_names}( ls\_file\_names ):
380     \textcolor{stringliteral}{'''}
381 \textcolor{stringliteral}{    Currently only check is for file name}
382 \textcolor{stringliteral}{    length (see comments above declaration of const }
383 \textcolor{stringliteral}{    MAX\_GENEPOP\_FILE\_NAME\_LENGTH.}
384 \textcolor{stringliteral}{    '''}
385     MSG\_FILE\_TOO\_LONG=\textcolor{stringliteral}{"File name longer than "} \(\backslash\)
386             + str( MAX\_GENEPOP\_FILE\_NAME\_LENGTH ) \(\backslash\)
387             + \textcolor{stringliteral}{" characters."}
388 
389     ls\_invalid\_file\_names\_and\_messages=[]
390 
391     \textcolor{keywordflow}{for} s\_file\_name \textcolor{keywordflow}{in} ls\_file\_names:
392         s\_file\_name\_no\_path=os.path.basename( s\_file\_name )
393         i\_len\_file\_name=len( s\_file\_name\_no\_path )
394 
395         \textcolor{keywordflow}{if} i\_len\_file\_name > MAX\_GENEPOP\_FILE\_NAME\_LENGTH:
396             ls\_invalid\_file\_names\_and\_messages.append( \(\backslash\)
397                     \textcolor{stringliteral}{", "}.join( [ s\_file\_name, MSG\_FILE\_TOO\_LONG ] ) )
398         \textcolor{comment}{#and if file name too long}
399     \textcolor{comment}{#end for each file name}
400 
401     \textcolor{keywordflow}{return} ls\_invalid\_file\_names\_and\_messages
402 \textcolor{comment}{#end get\_invalid\_file\_names}
403 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!get\+\_\+pops\+\_\+in\+\_\+file\+\_\+outside\+\_\+valid\+\_\+size\+\_\+range@{get\+\_\+pops\+\_\+in\+\_\+file\+\_\+outside\+\_\+valid\+\_\+size\+\_\+range}}
\index{get\+\_\+pops\+\_\+in\+\_\+file\+\_\+outside\+\_\+valid\+\_\+size\+\_\+range@{get\+\_\+pops\+\_\+in\+\_\+file\+\_\+outside\+\_\+valid\+\_\+size\+\_\+range}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{get\+\_\+pops\+\_\+in\+\_\+file\+\_\+outside\+\_\+valid\+\_\+size\+\_\+range(o\+\_\+genepopfile, i\+\_\+min\+\_\+pop\+\_\+size, i\+\_\+max\+\_\+pop\+\_\+size)}{get_pops_in_file_outside_valid_size_range(o_genepopfile, i_min_pop_size, i_max_pop_size)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+get\+\_\+pops\+\_\+in\+\_\+file\+\_\+outside\+\_\+valid\+\_\+size\+\_\+range (
\begin{DoxyParamCaption}
\item[{}]{o\+\_\+genepopfile, }
\item[{}]{i\+\_\+min\+\_\+pop\+\_\+size, }
\item[{}]{i\+\_\+max\+\_\+pop\+\_\+size}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_ab546af99f06d3ec795da61f806ffafa9}{}\label{namespacenegui_1_1pgdriveneestimator_ab546af99f06d3ec795da61f806ffafa9}
\begin{DoxyVerb}checks size of every pop in the file
in case we need to skip some pops and 
accept others.
\end{DoxyVerb}
 

Definition at line 693 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
693                                                 i\_max\_pop\_size ):
694     \textcolor{stringliteral}{'''}
695 \textcolor{stringliteral}{    checks size of every pop in the file}
696 \textcolor{stringliteral}{    in case we need to skip some pops and }
697 \textcolor{stringliteral}{    accept others.}
698 \textcolor{stringliteral}{    '''}
699 
700     li\_popsizes=o\_genepopfile.getIndividualCounts()
701 
702     li\_pops\_too\_small = []
703     \textcolor{keywordflow}{for} idx\_pop \textcolor{keywordflow}{in} range( len ( li\_popsizes ) ):
704         i\_size\_of\_pop=li\_popsizes[ idx\_pop ] 
705         \textcolor{keywordflow}{if} i\_size\_of\_pop < i\_min\_pop\_size \(\backslash\)
706                 \textcolor{keywordflow}{or} i\_size\_of\_pop > i\_max\_pop\_size:
707             li\_pops\_too\_small.append( idx\_pop )
708         \textcolor{comment}{#end if subsample size too small}
709     \textcolor{comment}{#end for each pop number}
710     \textcolor{keywordflow}{return} li\_pops\_too\_small
711 \textcolor{comment}{#end get\_pops\_in\_file\_too\_small\_to\_run}
712 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name@{get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name}}
\index{get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name@{get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name(s\+\_\+original\+\_\+genepop\+\_\+file\+\_\+name, s\+\_\+indiv\+\_\+sample, s\+\_\+this\+\_\+pop\+\_\+sample\+\_\+name)}{get_subsample_genepop_file_name(s_original_genepop_file_name, s_indiv_sample, s_this_pop_sample_name)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name (
\begin{DoxyParamCaption}
\item[{}]{s\+\_\+original\+\_\+genepop\+\_\+file\+\_\+name, }
\item[{}]{s\+\_\+indiv\+\_\+sample, }
\item[{}]{s\+\_\+this\+\_\+pop\+\_\+sample\+\_\+name}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a84955fc339f0354149185b5fa6444340}{}\label{namespacenegui_1_1pgdriveneestimator_a84955fc339f0354149185b5fa6444340}
\begin{DoxyVerb}Was originally simply a matter of replacing, in the original genepop file,
dots with underscores, but Windows revealed a case that needed attention 
(see "replace" below).
\end{DoxyVerb}
 

Definition at line 1372 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
1372                                                     s\_this\_pop\_sample\_name ):
1373     \textcolor{stringliteral}{'''}
1374 \textcolor{stringliteral}{    Was originally simply a matter of replacing, in the original genepop file,}
1375 \textcolor{stringliteral}{    dots with underscores, but Windows revealed a case that needed attention }
1376 \textcolor{stringliteral}{    (see "replace" below).}
1377 \textcolor{stringliteral}{    '''}
1378 
1379     s\_genepop\_file\_subsample=s\_original\_genepop\_file\_name \(\backslash\)
1380                                 + INPUT\_FILE\_DOT\_CHAR\_REPLACEMENT \(\backslash\)
1381                                 +  s\_indiv\_sample \(\backslash\)
1382                                 + INPUT\_FILE\_DOT\_CHAR\_REPLACEMENT \(\backslash\)
1383                                 + \textcolor{stringliteral}{"g"} + INPUT\_FILE\_DOT\_CHAR\_REPLACEMENT \(\backslash\)
1384                                 + s\_this\_pop\_sample\_name
1385     
1386     \textcolor{stringliteral}{'''}
1387 \textcolor{stringliteral}{    Note: In the original file name, if a period is left to the left of that}
1388 \textcolor{stringliteral}{    used do delimit the file extension, then NeEstimator, when naming}
1389 \textcolor{stringliteral}{    "*NoDat.txt" file, will replace the left-most period and all text that}
1390 \textcolor{stringliteral}{    follows it,  with "NoDat.txt" -- this then removes any percent and replicate}
1391 \textcolor{stringliteral}{    number text I'm using to make files unique, and so creates a non-uniq}
1392 \textcolor{stringliteral}{    *NoDat.txt file name, which, when one process removes it, and another goes}
1393 \textcolor{stringliteral}{    looking for it , throws an exception -- (an exception from the}
1394 \textcolor{stringliteral}{    multiprocessing.Pools async mapping -- file-not-found, but no trace since it}
1395 \textcolor{stringliteral}{    occurs in a different process from the main).  This peculiar mangling of a}
1396 \textcolor{stringliteral}{    users input file -- was preventing me in previous versions, from deleting}
1397 \textcolor{stringliteral}{    NoDat files, and also I think meant that only the last process in a given}
1398 \textcolor{stringliteral}{    group of replicates (share same genepop file and proportion sampled) to use}
1399 \textcolor{stringliteral}{    the NoDAt file got to write it's NoDat info.  Removing all periods from the}
1400 \textcolor{stringliteral}{    input file to the NeEstimator program, I belive, completely solves the}
1401 \textcolor{stringliteral}{    problems.}
1402 \textcolor{stringliteral}{    '''}
1403     \textcolor{comment}{##### temp}
1404     s\_basename=os.path.basename( s\_genepop\_file\_subsample )
1405     s\_dirs=os.path.dirname( s\_genepop\_file\_subsample )
1406     s\_genepop\_file\_basename=s\_basename.replace( \textcolor{stringliteral}{"."}, INPUT\_FILE\_DOT\_CHAR\_REPLACEMENT )
1407     s\_genepop\_file\_subsample=os.path.join( s\_dirs, s\_basename )
1408     
1409     \textcolor{comment}{#remmed out -- problems when the orig file has path that includes }
1410     \textcolor{comment}{#directories with dots in their names, so the wholesale replace}
1411     \textcolor{comment}{#then includes directories that are renamed and (no doubt) non-existent}
1412 
1413     \textcolor{comment}{#s\_genepop\_file\_subsample=s\_genepop\_file\_subsample.replace( ".", INPUT\_FILE\_DOT\_CHAR\_REPLACEMENT )}
1414     
1415     \textcolor{comment}{#####}
1416     \textcolor{stringliteral}{'''}
1417 \textcolor{stringliteral}{    problem seen in Windows, in which when this mod is invoked as \_\_main\_\_ from a shell}
1418 \textcolor{stringliteral}{    then ".\(\backslash\)\(\backslash\)" is appended to (at least) one genepop file name.  This then is mangled by}
1419 \textcolor{stringliteral}{    the above replace, so we restore the leading dot char:}
1420 \textcolor{stringliteral}{    '''}
1421 
1422     \textcolor{keywordflow}{if} s\_genepop\_file\_subsample.startswith(  \textcolor{stringliteral}{"\_"} ):
1423         s\_path\_seperator\_this\_os=os.path.sep
1424         s\_genepop\_file\_subsample=\textcolor{stringliteral}{"."} + s\_genepop\_file\_subsample[1:] 
1425     \textcolor{comment}{#end if path was mangled by replace}
1426 
1427 
1428     \textcolor{keywordflow}{return} s\_genepop\_file\_subsample
1429 \textcolor{comment}{#end get\_subsample\_genepop\_file\_name}
1430 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!mymain@{mymain}}
\index{mymain@{mymain}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{mymain(q\+\_\+args)}{mymain(q_args)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+mymain (
\begin{DoxyParamCaption}
\item[{}]{q\+\_\+args}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a9195d73a2642b87625772820ffff8023}{}\label{namespacenegui_1_1pgdriveneestimator_a9195d73a2642b87625772820ffff8023}
\begin{DoxyVerb}This code was at mod level under if __name__=="__main__",
but moved inside this def so this mod can be imported
and run inside python with a set of args identical to
those required on the command line.

This was an adaptation to enable PGGuiNeEstimator objects
to import this mod, then call this def after they load 
params (args for this driver) from their interface
\end{DoxyVerb}
 

Definition at line 1850 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
1850 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_a9195d73a2642b87625772820ffff8023}{mymain}( *q\_args ):
1851     \textcolor{stringliteral}{'''}
1852 \textcolor{stringliteral}{    This code was at mod level under if \_\_name\_\_=="\_\_main\_\_",}
1853 \textcolor{stringliteral}{    but moved inside this def so this mod can be imported}
1854 \textcolor{stringliteral}{    and run inside python with a set of args identical to}
1855 \textcolor{stringliteral}{    those required on the command line.}
1856 \textcolor{stringliteral}{}
1857 \textcolor{stringliteral}{    This was an adaptation to enable PGGuiNeEstimator objects}
1858 \textcolor{stringliteral}{    to import this mod, then call this def after they load }
1859 \textcolor{stringliteral}{    params (args for this driver) from their interface}
1860 \textcolor{stringliteral}{    '''}
1861 
1862     b\_exec\_found=did\_find\_ne\_estimator\_executable()
1863 
1864     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} did\_find\_ne\_estimator\_executable():
1865         \textcolor{keywordflow}{raise} Exception( \textcolor{stringliteral}{"in pgdriveneestimator.py, def mymain(), did not find NeEstimator executable."} )
1866     \textcolor{comment}{#end if can't find executable}
1867 
1868     drive\_estimator(  *( q\_args ) )
1869 
1870     \textcolor{keywordflow}{return}
1871 \textcolor{comment}{#end mymain}
1872 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!parse\+\_\+sampling\+\_\+list\+\_\+that\+\_\+uses\+\_\+indiv\+\_\+id\+\_\+fields@{parse\+\_\+sampling\+\_\+list\+\_\+that\+\_\+uses\+\_\+indiv\+\_\+id\+\_\+fields}}
\index{parse\+\_\+sampling\+\_\+list\+\_\+that\+\_\+uses\+\_\+indiv\+\_\+id\+\_\+fields@{parse\+\_\+sampling\+\_\+list\+\_\+that\+\_\+uses\+\_\+indiv\+\_\+id\+\_\+fields}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{parse\+\_\+sampling\+\_\+list\+\_\+that\+\_\+uses\+\_\+indiv\+\_\+id\+\_\+fields(ls\+\_\+sampling\+\_\+list\+\_\+items)}{parse_sampling_list_that_uses_indiv_id_fields(ls_sampling_list_items)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+parse\+\_\+sampling\+\_\+list\+\_\+that\+\_\+uses\+\_\+indiv\+\_\+id\+\_\+fields (
\begin{DoxyParamCaption}
\item[{}]{ls\+\_\+sampling\+\_\+list\+\_\+items}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a367b16a89c7ae46ab0bda5b37e68d9af}{}\label{namespacenegui_1_1pgdriveneestimator_a367b16a89c7ae46ab0bda5b37e68d9af}
\begin{DoxyVerb}We require that we have at least 3 items
to set up  sampling using individual id field
criteria:
--list of field names (space delimited)
    ex: "age parent1 parent2"
--list of field types (python types, space delimited)
    ex: "int str str"
--at least one parameter (not validated here
    -> example in criteria expression  "age > 3"
    ->example, in cohort we expect several params like max. age     \end{DoxyVerb}
 

Definition at line 961 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
961 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_a367b16a89c7ae46ab0bda5b37e68d9af}{parse\_sampling\_list\_that\_uses\_indiv\_id\_fields}( 
      ls\_sampling\_list\_items ):
962 
963     \textcolor{stringliteral}{'''}
964 \textcolor{stringliteral}{    We require that we have at least 3 items}
965 \textcolor{stringliteral}{    to set up  sampling using individual id field}
966 \textcolor{stringliteral}{    criteria:}
967 \textcolor{stringliteral}{    --list of field names (space delimited)}
968 \textcolor{stringliteral}{        ex: "age parent1 parent2"}
969 \textcolor{stringliteral}{    --list of field types (python types, space delimited)}
970 \textcolor{stringliteral}{        ex: "int str str"}
971 \textcolor{stringliteral}{    --at least one parameter (not validated here}
972 \textcolor{stringliteral}{        -> example in criteria expression  "age > 3"}
973 \textcolor{stringliteral}{        ->example, in cohort we expect several params like max. age     }
974 \textcolor{stringliteral}{}
975 \textcolor{stringliteral}{    '''}
976 
977     MIN\_NUM\_SAMPLING\_ITEMS=3
978     IDX\_FIELD\_NAMES=0
979     IDX\_FIELD\_TYPES=1
980     IDX\_FIRST\_PARAM=2
981     FIELD\_DELIMITER=\textcolor{stringliteral}{";"}
982 
983     i\_tot\_sampling\_items=len( ls\_sampling\_list\_items )
984 
985     \textcolor{keywordflow}{if} i\_tot\_sampling\_items < MIN\_NUM\_SAMPLING\_ITEMS:
986         s\_msg = \textcolor{stringliteral}{"In pgdriveneestimatory.py, def parse\_sampling\_list\_that\_uses\_indiv\_id\_fields, "} \(\backslash\)
987                     + \textcolor{stringliteral}{"for the sampling criteria list, expecting at 3 items "} \(\backslash\)
988                     + \textcolor{stringliteral}{"(field names, field types, and one or more "} \(\backslash\)
989                     + \textcolor{stringliteral}{"parameters.  Found list: "} \(\backslash\)
990                     + str( ls\_sampling\_list\_items ) + \textcolor{stringliteral}{"."}
991         \textcolor{keywordflow}{raise} Exception( s\_msg )
992 
993     \textcolor{comment}{#end if too few criteria items}
994     ls\_field\_names=ls\_sampling\_list\_items[ IDX\_FIELD\_NAMES ].split( FIELD\_DELIMITER )
995     ls\_types=ls\_sampling\_list\_items[ IDX\_FIELD\_TYPES ].split( FIELD\_DELIMITER )
996     \textcolor{keywordflow}{try}:
997 
998         lo\_field\_types=[ eval( s\_type ) \textcolor{keywordflow}{for} s\_type \textcolor{keywordflow}{in} ls\_types ]
999     
1000     \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} oex:
1001         s\_msg=\textcolor{stringliteral}{"In pgdriveneestimator.py, def parse\_sampling\_list\_that\_uses\_indiv\_id\_fields, "} \(\backslash\)
1002                     + \textcolor{stringliteral}{"Exception trying to evaluate the field type list. "}\(\backslash\)
1003                     + \textcolor{stringliteral}{"Type list: "} + str( ls\_types ) + \textcolor{stringliteral}{".  Exception raised: "} \(\backslash\)
1004                     + str( oex ) + \textcolor{stringliteral}{"."}
1005         \textcolor{keywordflow}{raise} Exception ( s\_msg )
1006     \textcolor{comment}{#end try ... except}
1007 
1008     ls\_params=[]
1009 
1010     \textcolor{keywordflow}{for} idx \textcolor{keywordflow}{in} range( IDX\_FIRST\_PARAM, i\_tot\_sampling\_items ):
1011         ls\_params.append( ls\_sampling\_list\_items[ idx ] )
1012     \textcolor{comment}{#end for each item with idx>1}
1013 
1014     \textcolor{keywordflow}{return} ls\_field\_names, lo\_field\_types, ls\_params
1015 
1016 \textcolor{comment}{#end parse\_sampling\_list\_that\_uses\_indiv\_id\_fields}
1017 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file@{raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file}}
\index{raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file@{raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file(o\+\_\+genepopfile)}{raise_exception_if_non_single_pop_file(o_genepopfile)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file (
\begin{DoxyParamCaption}
\item[{}]{o\+\_\+genepopfile}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_ac98833013f11d6aa3544b0fc60951632}{}\label{namespacenegui_1_1pgdriveneestimator_ac98833013f11d6aa3544b0fc60951632}
\begin{DoxyVerb}Not currently in use ( 2016_08_10 ) -- was used when
genepop files with >1 population were not accepted.
\end{DoxyVerb}
 

Definition at line 669 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
669 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_ac98833013f11d6aa3544b0fc60951632}{raise\_exception\_if\_non\_single\_pop\_file}( o\_genepopfile ):
670     \textcolor{stringliteral}{'''}
671 \textcolor{stringliteral}{    Not currently in use ( 2016\_08\_10 ) -- was used when}
672 \textcolor{stringliteral}{    genepop files with >1 population were not accepted.}
673 \textcolor{stringliteral}{    '''}
674     i\_total\_pops=o\_genepopfile.pop\_total
675 
676     \textcolor{keywordflow}{if} ( i\_total\_pops != 1 ):
677         s\_msg=\textcolor{stringliteral}{"In pgdriveneestimator.py:"} + OUTPUT\_ENDLINE
678         \textcolor{keywordflow}{if} i\_total\_pops < 1:
679             s\_msg+=\textcolor{stringliteral}{"No \(\backslash\)"pop\(\backslash\)" entry found in file, "} \(\backslash\)
680                     + s\_filename
681         \textcolor{keywordflow}{else}:
682             s\_msg+=\textcolor{stringliteral}{"Current implementation of drive accepts genepop "} \(\backslash\)
683                 + \textcolor{stringliteral}{"files with only a single pop."}
684         \textcolor{comment}{#end if lt 1 else more}
685         \textcolor{keywordflow}{raise} Exception( s\_msg )
686     \textcolor{comment}{#end if non-single pop file}
687 
688     \textcolor{keywordflow}{return}
689 \textcolor{comment}{#end raise\_exception\_non\_single\_pop\_file}
690 
\end{DoxyCode}


\subsection{Variable Documentation}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!L\+S\+\_\+\+A\+R\+G\+S\+\_\+\+H\+E\+L\+P\+\_\+\+O\+P\+T\+I\+O\+N\+AL@{L\+S\+\_\+\+A\+R\+G\+S\+\_\+\+H\+E\+L\+P\+\_\+\+O\+P\+T\+I\+O\+N\+AL}}
\index{L\+S\+\_\+\+A\+R\+G\+S\+\_\+\+H\+E\+L\+P\+\_\+\+O\+P\+T\+I\+O\+N\+AL@{L\+S\+\_\+\+A\+R\+G\+S\+\_\+\+H\+E\+L\+P\+\_\+\+O\+P\+T\+I\+O\+N\+AL}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{L\+S\+\_\+\+A\+R\+G\+S\+\_\+\+H\+E\+L\+P\+\_\+\+O\+P\+T\+I\+O\+N\+AL}{LS_ARGS_HELP_OPTIONAL}}]{\setlength{\rightskip}{0pt plus 5cm}list negui.\+pgdriveneestimator.\+L\+S\+\_\+\+A\+R\+G\+S\+\_\+\+H\+E\+L\+P\+\_\+\+O\+P\+T\+I\+O\+N\+AL}\hypertarget{namespacenegui_1_1pgdriveneestimator_aee59027c12769e0749f07a70867259b4}{}\label{namespacenegui_1_1pgdriveneestimator_aee59027c12769e0749f07a70867259b4}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = [ \textcolor{stringliteral}{"total processes to use (single integer) Default is 1 process."},
2                 \textcolor{stringliteral}{"\(\backslash\)"no\_debug\(\backslash\)", \(\backslash\)"debug1\(\backslash\)", \(\backslash\)"debug2\(\backslash\)", \(\backslash\)"debug3\(\backslash\)", \(\backslash\)"testserial\(\backslash\)", \(\backslash\)"testmulti\(\backslash\)""} \(\backslash\)
3                 + \textcolor{stringliteral}{".  Indicates a run mode. The default is \(\backslash\)"no\_debug\(\backslash\)", which runs multiplexed with
       standard output.  "} \(\backslash\)
4                 + \textcolor{stringliteral}{"Other modes except \(\backslash\)"testmulti\(\backslash\)", run non-parallelized, with increasing output.  "} \(\backslash\)
5                 + \textcolor{stringliteral}{"Debug 3, for example, adds to the output a table listing, for each indiv. "} \(\backslash\)
6                 + \textcolor{stringliteral}{"in each file, which replicate Ne estimates include the individual.  It also preserves "} 
      \(\backslash\)
7                 + \textcolor{stringliteral}{"the intermediate genepop and NeEstimator output files"} ]
\end{DoxyCode}


Definition at line 167 of file pgdriveneestimator.\+py.

\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!S\+A\+M\+P\+L\+E\+\_\+\+S\+C\+H\+E\+M\+E\+S\+\_\+\+N\+O\+N\+\_\+\+C\+R\+I\+T\+E\+R\+IA@{S\+A\+M\+P\+L\+E\+\_\+\+S\+C\+H\+E\+M\+E\+S\+\_\+\+N\+O\+N\+\_\+\+C\+R\+I\+T\+E\+R\+IA}}
\index{S\+A\+M\+P\+L\+E\+\_\+\+S\+C\+H\+E\+M\+E\+S\+\_\+\+N\+O\+N\+\_\+\+C\+R\+I\+T\+E\+R\+IA@{S\+A\+M\+P\+L\+E\+\_\+\+S\+C\+H\+E\+M\+E\+S\+\_\+\+N\+O\+N\+\_\+\+C\+R\+I\+T\+E\+R\+IA}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{S\+A\+M\+P\+L\+E\+\_\+\+S\+C\+H\+E\+M\+E\+S\+\_\+\+N\+O\+N\+\_\+\+C\+R\+I\+T\+E\+R\+IA}{SAMPLE_SCHEMES_NON_CRITERIA}}]{\setlength{\rightskip}{0pt plus 5cm}list negui.\+pgdriveneestimator.\+S\+A\+M\+P\+L\+E\+\_\+\+S\+C\+H\+E\+M\+E\+S\+\_\+\+N\+O\+N\+\_\+\+C\+R\+I\+T\+E\+R\+IA}\hypertarget{namespacenegui_1_1pgdriveneestimator_a2d9d6cbe867f7222f090e8fa43d5c04d}{}\label{namespacenegui_1_1pgdriveneestimator_a2d9d6cbe867f7222f090e8fa43d5c04d}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = [ SAMPLE\_BY\_PERCENTAGES, 
2                                     SAMPLE\_BY\_REMOVAL ]
\end{DoxyCode}


Definition at line 217 of file pgdriveneestimator.\+py.

