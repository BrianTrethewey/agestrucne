\hypertarget{namespacenegui_1_1pgdriveneestimator}{}\section{negui.\+pgdriveneestimator Namespace Reference}
\label{namespacenegui_1_1pgdriveneestimator}\index{negui.\+pgdriveneestimator@{negui.\+pgdriveneestimator}}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classnegui_1_1pgdriveneestimator_1_1DebugMode}{Debug\+Mode}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def {\bfseries set\+\_\+indices\+\_\+ne\+\_\+estimator\+\_\+output\+\_\+fields\+\_\+to\+\_\+skip} ()\hypertarget{namespacenegui_1_1pgdriveneestimator_afd1338775d832ffc8d84cc10c6d1815b}{}\label{namespacenegui_1_1pgdriveneestimator_afd1338775d832ffc8d84cc10c6d1815b}

\item 
def {\bfseries get\+\_\+datetime\+\_\+as\+\_\+string} ()\hypertarget{namespacenegui_1_1pgdriveneestimator_a2d64d88a4d4f63a1f8e0c71606942690}{}\label{namespacenegui_1_1pgdriveneestimator_a2d64d88a4d4f63a1f8e0c71606942690}

\item 
def {\bfseries set\+\_\+debug\+\_\+mode} (s\+\_\+arg)\hypertarget{namespacenegui_1_1pgdriveneestimator_aa1b949a1baced8ac2725ae493f7216d8}{}\label{namespacenegui_1_1pgdriveneestimator_aa1b949a1baced8ac2725ae493f7216d8}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a944008262ae2ee7c6fc796499be626ce}{get\+\_\+invalid\+\_\+file\+\_\+names} (ls\+\_\+file\+\_\+names)
\item 
def {\bfseries file\+\_\+name\+\_\+list\+\_\+is\+\_\+all\+\_\+strings} (ls\+\_\+files)\hypertarget{namespacenegui_1_1pgdriveneestimator_a25129002805e932c87b657a083173863}{}\label{namespacenegui_1_1pgdriveneestimator_a25129002805e932c87b657a083173863}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a15b09d2967ec4812353b0e146f074799}{get\+\_\+genepop\+\_\+file\+\_\+list} (s\+\_\+genepop\+\_\+files\+\_\+arg)
\item 
def {\bfseries parse\+\_\+args} (args)\hypertarget{namespacenegui_1_1pgdriveneestimator_a3a0c075de2bc7a0d00b1893128b189c8}{}\label{namespacenegui_1_1pgdriveneestimator_a3a0c075de2bc7a0d00b1893128b189c8}

\item 
def {\bfseries get\+\_\+sample\+\_\+val\+\_\+and\+\_\+rep\+\_\+number\+\_\+from\+\_\+sample\+\_\+name} (s\+\_\+sample\+\_\+name, s\+\_\+sample\+\_\+scheme)\hypertarget{namespacenegui_1_1pgdriveneestimator_a3807e058c5f9e9e73eb6ecae5221853b}{}\label{namespacenegui_1_1pgdriveneestimator_a3807e058c5f9e9e73eb6ecae5221853b}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_ac98833013f11d6aa3544b0fc60951632}{raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file} (o\+\_\+genepopfile)
\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a8255cfe046e2bbb517ee9834d626c021}{get\+\_\+pops\+\_\+in\+\_\+file\+\_\+too\+\_\+small\+\_\+to\+\_\+run} (o\+\_\+genepopfile, f\+\_\+proportion, i\+\_\+min\+\_\+pop\+\_\+size)
\item 
def {\bfseries do\+\_\+estimate} (o\+\_\+genepopfile, o\+\_\+ne\+\_\+estimator, f\+\_\+proportion, f\+\_\+min\+\_\+allele\+\_\+freq, s\+\_\+subsample\+\_\+tag, s\+\_\+pop\+\_\+subsample\+\_\+tag, i\+\_\+replicate\+\_\+number, o\+\_\+debug\+\_\+mode, I\+D\+X\+\_\+\+N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+IP)\hypertarget{namespacenegui_1_1pgdriveneestimator_a96ed6f3a776d97ee0f62d42eaeb344b6}{}\label{namespacenegui_1_1pgdriveneestimator_a96ed6f3a776d97ee0f62d42eaeb344b6}

\item 
def {\bfseries write\+\_\+results} (ds\+\_\+results, o\+\_\+main\+\_\+outfile, o\+\_\+secondary\+\_\+outfile)\hypertarget{namespacenegui_1_1pgdriveneestimator_a97bd4891f7343e405094bdf307c7ee89}{}\label{namespacenegui_1_1pgdriveneestimator_a97bd4891f7343e405094bdf307c7ee89}

\item 
def {\bfseries update\+\_\+indiv\+\_\+list} (dddli\+\_\+indiv\+\_\+list, dv\+\_\+indiv\+\_\+info\+\_\+for\+\_\+replicate, lf\+\_\+proportions)\hypertarget{namespacenegui_1_1pgdriveneestimator_a13125786920acfc0de2b28feadb33d52}{}\label{namespacenegui_1_1pgdriveneestimator_a13125786920acfc0de2b28feadb33d52}

\item 
def {\bfseries make\+\_\+indiv\+\_\+table\+\_\+name} ()\hypertarget{namespacenegui_1_1pgdriveneestimator_aba42585f01bf9ed8468c043e7f05e56a}{}\label{namespacenegui_1_1pgdriveneestimator_aba42585f01bf9ed8468c043e7f05e56a}

\item 
def {\bfseries get\+\_\+indiv\+\_\+table\+\_\+header} (lf\+\_\+proportions)\hypertarget{namespacenegui_1_1pgdriveneestimator_a8ea31f316844b96fb9ba5d9985b16ecc}{}\label{namespacenegui_1_1pgdriveneestimator_a8ea31f316844b96fb9ba5d9985b16ecc}

\item 
def {\bfseries write\+\_\+indiv\+\_\+table} (dddli\+\_\+indiv\+\_\+list, s\+\_\+file\+\_\+name, lf\+\_\+proportions)\hypertarget{namespacenegui_1_1pgdriveneestimator_aafa226c9f86340bb646ac850410d315c}{}\label{namespacenegui_1_1pgdriveneestimator_aafa226c9f86340bb646ac850410d315c}

\item 
def {\bfseries print\+\_\+test\+\_\+list\+\_\+replicate\+\_\+selection\+\_\+indices} (o\+\_\+genepopfile, s\+\_\+sample\+\_\+scheme, s\+\_\+indiv\+\_\+subsample\+\_\+tag, o\+\_\+secondary\+\_\+outfile, s\+\_\+population\+\_\+subsample\+\_\+tag)\hypertarget{namespacenegui_1_1pgdriveneestimator_a97627c981f1e2e59eecd69efb11c7044}{}\label{namespacenegui_1_1pgdriveneestimator_a97627c981f1e2e59eecd69efb11c7044}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_aa5f7fc02442df628112ba81a98a3691e}{do\+\_\+sample} (o\+\_\+genepopfile, s\+\_\+sample\+\_\+scheme, lv\+\_\+sample\+\_\+values, i\+\_\+replicates)
\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a84955fc339f0354149185b5fa6444340}{get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name} (s\+\_\+original\+\_\+genepop\+\_\+file\+\_\+name, s\+\_\+indiv\+\_\+sample, s\+\_\+this\+\_\+pop\+\_\+sample\+\_\+name)
\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_ad4d8f98c3864bd57b05a6bd28f1f0619}{add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate} (o\+\_\+genepopfile, f\+\_\+min\+\_\+allele\+\_\+freq, i\+\_\+min\+\_\+pop\+\_\+size, o\+\_\+debug\+\_\+mode, llv\+\_\+args\+\_\+each\+\_\+process, I\+D\+X\+\_\+\+N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+IP, o\+\_\+secondary\+\_\+outfile)
\item 
def {\bfseries write\+\_\+result\+\_\+sets} (lds\+\_\+results, lv\+\_\+sample\+\_\+values, o\+\_\+debug\+\_\+mode, o\+\_\+main\+\_\+outfile, o\+\_\+secondary\+\_\+outfile)\hypertarget{namespacenegui_1_1pgdriveneestimator_aa45ae8154c350b0a30ba8c1037bfd445}{}\label{namespacenegui_1_1pgdriveneestimator_aa45ae8154c350b0a30ba8c1037bfd445}

\item 
def {\bfseries execute\+\_\+ne\+\_\+for\+\_\+each\+\_\+sample} (llv\+\_\+args\+\_\+each\+\_\+process, o\+\_\+process\+\_\+pool, o\+\_\+debug\+\_\+mode, o\+\_\+multiprocessing\+\_\+event)\hypertarget{namespacenegui_1_1pgdriveneestimator_aefaaafaa951edf46424dfc57535046a7}{}\label{namespacenegui_1_1pgdriveneestimator_aefaaafaa951edf46424dfc57535046a7}

\item 
def {\bfseries write\+\_\+header\+\_\+main\+\_\+table} (I\+D\+X\+\_\+\+N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+IP, o\+\_\+main\+\_\+outfile)\hypertarget{namespacenegui_1_1pgdriveneestimator_adffb79ac878373773c2927935685788d}{}\label{namespacenegui_1_1pgdriveneestimator_adffb79ac878373773c2927935685788d}

\item 
def {\bfseries drive\+\_\+estimator} (args)\hypertarget{namespacenegui_1_1pgdriveneestimator_a688d7a2f0a11f0225a5f95d7403d771e}{}\label{namespacenegui_1_1pgdriveneestimator_a688d7a2f0a11f0225a5f95d7403d771e}

\item 
def {\bfseries did\+\_\+find\+\_\+ne\+\_\+estimator\+\_\+executable} ()\hypertarget{namespacenegui_1_1pgdriveneestimator_acd20398ef9d21132f19d1c0e564b25b9}{}\label{namespacenegui_1_1pgdriveneestimator_acd20398ef9d21132f19d1c0e564b25b9}

\item 
def \hyperlink{namespacenegui_1_1pgdriveneestimator_a9195d73a2642b87625772820ffff8023}{mymain} (q\+\_\+args)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
bool {\bfseries V\+E\+R\+B\+O\+SE} = False\hypertarget{namespacenegui_1_1pgdriveneestimator_aeae180a6a906ac89f58c9af1f6c8fd77}{}\label{namespacenegui_1_1pgdriveneestimator_aeae180a6a906ac89f58c9af1f6c8fd77}

\item 
bool {\bfseries V\+E\+R\+Y\+\_\+\+V\+E\+R\+B\+O\+SE} = False\hypertarget{namespacenegui_1_1pgdriveneestimator_ab3e4d5f9e16fe1e71748c637b908eb55}{}\label{namespacenegui_1_1pgdriveneestimator_ab3e4d5f9e16fe1e71748c637b908eb55}

\item 
list {\bfseries L\+S\+\_\+\+A\+R\+GS}
\item 
list {\bfseries L\+S\+\_\+\+O\+P\+T\+I\+O\+N\+A\+L\+\_\+\+A\+R\+GS}
\item 
list {\bfseries H\+I\+D\+D\+E\+N\+\_\+\+A\+R\+GS} = \mbox{[} \char`\"{}file\+\_\+object\+\_\+main\char`\"{}, \char`\"{}file\+\_\+object\+\_\+secondary\char`\"{} \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_a6fd954e84a4eb8eeb2a1a63e5f53c716}{}\label{namespacenegui_1_1pgdriveneestimator_a6fd954e84a4eb8eeb2a1a63e5f53c716}

\item 
string {\bfseries D\+E\+F\+A\+U\+L\+T\+\_\+\+N\+U\+M\+\_\+\+P\+R\+O\+C\+E\+S\+S\+ES} = \char`\"{}1\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a2e948c0ce60271c8e6e3b08edb453839}{}\label{namespacenegui_1_1pgdriveneestimator_a2e948c0ce60271c8e6e3b08edb453839}

\item 
string {\bfseries D\+E\+F\+A\+U\+L\+T\+\_\+\+D\+E\+B\+U\+G\+\_\+\+M\+O\+DE} = \char`\"{}no\+\_\+debug\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_af83e46ff34683de5b4e27783ac68425f}{}\label{namespacenegui_1_1pgdriveneestimator_af83e46ff34683de5b4e27783ac68425f}

\item 
int {\bfseries M\+A\+X\+\_\+\+G\+E\+N\+E\+P\+O\+P\+\_\+\+F\+I\+L\+E\+\_\+\+N\+A\+M\+E\+\_\+\+L\+E\+N\+G\+TH} = 31\hypertarget{namespacenegui_1_1pgdriveneestimator_aaaca09e92573315d60360d27b83338ee}{}\label{namespacenegui_1_1pgdriveneestimator_aaaca09e92573315d60360d27b83338ee}

\item 
float {\bfseries S\+E\+C\+O\+N\+D\+S\+\_\+\+T\+O\+\_\+\+S\+L\+E\+EP} = 1.\+00\hypertarget{namespacenegui_1_1pgdriveneestimator_a1363a44c877cd0837fd1f4eae1f2d6e9}{}\label{namespacenegui_1_1pgdriveneestimator_a1363a44c877cd0837fd1f4eae1f2d6e9}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+B\+Y\+\_\+\+P\+E\+R\+C\+E\+N\+T\+A\+G\+ES} = \char`\"{}percent\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a6ee69b369b673a4e1a4bd9538dd98416}{}\label{namespacenegui_1_1pgdriveneestimator_a6ee69b369b673a4e1a4bd9538dd98416}

\item 
string {\bfseries S\+A\+M\+P\+L\+E\+\_\+\+B\+Y\+\_\+\+R\+E\+M\+O\+V\+AL} = \char`\"{}remove\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a9ec6d87d70349dd43f33a16cfa7e68c0}{}\label{namespacenegui_1_1pgdriveneestimator_a9ec6d87d70349dd43f33a16cfa7e68c0}

\item 
string {\bfseries O\+U\+T\+P\+U\+T\+\_\+\+D\+E\+L\+I\+M\+I\+T\+ER} = \char`\"{}\textbackslash{}t\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a68b08075d6e1a58ae325c600881c9d6c}{}\label{namespacenegui_1_1pgdriveneestimator_a68b08075d6e1a58ae325c600881c9d6c}

\item 
string {\bfseries E\+N\+D\+L\+I\+N\+E\+\_\+\+S\+EQ} = \char`\"{}\textbackslash{}n\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_aa8d38cb5ca07a3c1f89cd4c3d7cccb08}{}\label{namespacenegui_1_1pgdriveneestimator_aa8d38cb5ca07a3c1f89cd4c3d7cccb08}

\item 
string {\bfseries O\+U\+T\+P\+U\+T\+\_\+\+E\+N\+D\+L\+I\+NE} = \char`\"{}\textbackslash{}n\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a56a1a1d753221dfbed6ffc7cd58222f1}{}\label{namespacenegui_1_1pgdriveneestimator_a56a1a1d753221dfbed6ffc7cd58222f1}

\item 
string {\bfseries R\+E\+P\+L\+I\+C\+A\+T\+E\+\_\+\+D\+E\+L\+I\+M\+I\+T\+ER} = \char`\"{},\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a4a72408d1cee500503a7aa185253b438}{}\label{namespacenegui_1_1pgdriveneestimator_a4a72408d1cee500503a7aa185253b438}

\item 
list {\bfseries N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+IP} = \mbox{[} \char`\"{}case\+\_\+number\char`\"{} \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_a77c91566694093f57286607ae144d35a}{}\label{namespacenegui_1_1pgdriveneestimator_a77c91566694093f57286607ae144d35a}

\item 
list {\bfseries N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+L\+E\+\_\+\+T\+A\+GS} = \mbox{[} \char`\"{}No\+Dat.\+txt\char`\"{}, \char`\"{}x\+Tp.\+txt\char`\"{}, \char`\"{}ne\+\_\+run.\+txt\char`\"{} \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_a167fb016fbc3709c4c778c4a5157cd06}{}\label{namespacenegui_1_1pgdriveneestimator_a167fb016fbc3709c4c778c4a5157cd06}

\item 
string {\bfseries G\+L\+O\+B\+\_\+\+I\+N\+T\+E\+R\+M\+E\+D\+I\+A\+T\+E\+\_\+\+G\+E\+N\+E\+P\+O\+P\+\_\+\+F\+I\+L\+E\+\_\+\+T\+A\+GS} = \char`\"{}$\ast$\+\_\+r\+\_\+$\ast$\+\_\+g\+\_\+$\ast$\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_a1bb977fffd730588ade2008f702d6110}{}\label{namespacenegui_1_1pgdriveneestimator_a1bb977fffd730588ade2008f702d6110}

\item 
string {\bfseries I\+N\+P\+U\+T\+\_\+\+F\+I\+L\+E\+\_\+\+D\+O\+T\+\_\+\+C\+H\+A\+R\+\_\+\+R\+E\+P\+L\+A\+C\+E\+M\+E\+NT} = \char`\"{}\+\_\+\char`\"{}\hypertarget{namespacenegui_1_1pgdriveneestimator_ae33783002cdab9bc1d96f7cfe99a0ec9}{}\label{namespacenegui_1_1pgdriveneestimator_ae33783002cdab9bc1d96f7cfe99a0ec9}

\item 
{\bfseries s\+\_\+usage}
\item 
{\bfseries ls\+\_\+args\+\_\+passed} = sys.\+argv\mbox{[} 1\+: \mbox{]}\hypertarget{namespacenegui_1_1pgdriveneestimator_ad3cf21db0cb237a123d35cc33f27a235}{}\label{namespacenegui_1_1pgdriveneestimator_ad3cf21db0cb237a123d35cc33f27a235}

\item 
{\bfseries i\+\_\+total\+\_\+args\+\_\+passed} = len( ls\+\_\+args\+\_\+passed )\hypertarget{namespacenegui_1_1pgdriveneestimator_adc41d942a498e8128e501a4a31b3b7cf}{}\label{namespacenegui_1_1pgdriveneestimator_adc41d942a498e8128e501a4a31b3b7cf}

\item 
{\bfseries i\+\_\+total\+\_\+nonopt} = len( L\+S\+\_\+\+A\+R\+GS )\hypertarget{namespacenegui_1_1pgdriveneestimator_aa4e6982ff99236ac13e0af4c4d6e8839}{}\label{namespacenegui_1_1pgdriveneestimator_aa4e6982ff99236ac13e0af4c4d6e8839}

\item 
int {\bfseries i\+\_\+total\+\_\+with\+\_\+process\+\_\+opt} = i\+\_\+total\+\_\+nonopt+1\hypertarget{namespacenegui_1_1pgdriveneestimator_a94c82961d29b7470ac2fab07c882ea51}{}\label{namespacenegui_1_1pgdriveneestimator_a94c82961d29b7470ac2fab07c882ea51}

\item 
int {\bfseries i\+\_\+total\+\_\+with\+\_\+debug} = i\+\_\+total\+\_\+nonopt+2\hypertarget{namespacenegui_1_1pgdriveneestimator_a016de539b454a69f16a92dd281f1e59d}{}\label{namespacenegui_1_1pgdriveneestimator_a016de539b454a69f16a92dd281f1e59d}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Description

given 
    -->a list of genepop files, 
    -->a list of percentages of the total indiv
       to subsample
    --> a number giving a minimum pop size 
       after subsampling
    -->a minimum allele frequency (single float)
    --> a number giving the total replicate NeEstimator runs 
to be executed on each file at each subsample percentage 

    subsamples and then runs the Ne estimator for each combination of 
    genepop_file,percentage,replicate_number. 
    
    As of Fri May 13 19:01:06 MDT 2016, still not sure
    how best to get the results to file or stream.

Mon Aug 15 20:04:00 MDT 2016
    revised so that now args list includes
    -->a list of genepop files, 
    -->one of [percent|remove] (names a subsampling scheme, to be enlarged)
    -->a list of percentages, for percent samplin, or N-values for removing N
from the individuals    
    --> a number giving a minimum pop size 
       after subsampling (fewer than the min count of indiv, and the pop is skipped)
    -->a minimum allele frequency (single float)
    --> a number giving the total replicate NeEstimator runs 
to be executed on each file at each subsample percentage 
    -->optional the number of processes to create in performing the
estimates in parallele, on process for each population (as divided up inside a file,
or as given by a signle genepop file with only one population listed)
    
    Also revised to allow the improtation of this mod, so that the same operations
    can be intitiated by a call to "mymain".  The importation method allows for 
    passing in two file objects, open for writing.  The console method, that satisfies
    "if __name__== "__main__", does not allow the file object args and prints to stdout and stderr.\end{DoxyVerb}
 

\subsection{Function Documentation}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate@{add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate}}
\index{add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate@{add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate(o\+\_\+genepopfile, f\+\_\+min\+\_\+allele\+\_\+freq, i\+\_\+min\+\_\+pop\+\_\+size, o\+\_\+debug\+\_\+mode, llv\+\_\+args\+\_\+each\+\_\+process, I\+D\+X\+\_\+\+N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+I\+P, o\+\_\+secondary\+\_\+outfile)}{add_to_set_of_calls_to_do_estimate(o_genepopfile, f_min_allele_freq, i_min_pop_size, o_debug_mode, llv_args_each_process, IDX_NE_ESTIMATOR_OUTPUT_FIELDS_TO_SKIP, o_secondary_outfile)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+add\+\_\+to\+\_\+set\+\_\+of\+\_\+calls\+\_\+to\+\_\+do\+\_\+estimate (
\begin{DoxyParamCaption}
\item[{}]{o\+\_\+genepopfile, }
\item[{}]{f\+\_\+min\+\_\+allele\+\_\+freq, }
\item[{}]{i\+\_\+min\+\_\+pop\+\_\+size, }
\item[{}]{o\+\_\+debug\+\_\+mode, }
\item[{}]{llv\+\_\+args\+\_\+each\+\_\+process, }
\item[{}]{I\+D\+X\+\_\+\+N\+E\+\_\+\+E\+S\+T\+I\+M\+A\+T\+O\+R\+\_\+\+O\+U\+T\+P\+U\+T\+\_\+\+F\+I\+E\+L\+D\+S\+\_\+\+T\+O\+\_\+\+S\+K\+IP, }
\item[{}]{o\+\_\+secondary\+\_\+outfile}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_ad4d8f98c3864bd57b05a6bd28f1f0619}{}\label{namespacenegui_1_1pgdriveneestimator_ad4d8f98c3864bd57b05a6bd28f1f0619}
\begin{DoxyVerb}creates ne-estimator caller object and adds it to list of args for a single call
to do estimate.  This call is then appended to llv_args_each_process
\end{DoxyVerb}
 

Definition at line 832 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
832                         o\_secondary\_outfile ):
833     \textcolor{stringliteral}{'''     }
834 \textcolor{stringliteral}{    creates ne-estimator caller object and adds it to list of args for a single call}
835 \textcolor{stringliteral}{    to do estimate.  This call is then appended to llv\_args\_each\_process}
836 \textcolor{stringliteral}{    '''}
837 
838     \textcolor{comment}{#all these GenepopFileManager objects should now have}
839     \textcolor{comment}{#a single population sample name (and which also names the }
840     \textcolor{comment}{#sampling scheme type):}
841     s\_population\_sample\_name=o\_genepopfile.population\_subsample\_tags[ 0 ]
842     s\_sample\_scheme=s\_population\_sample\_name
843 
844     ls\_indiv\_sample\_names=o\_genepopfile.indiv\_subsample\_tags
845 
846     li\_population\_numbers=o\_genepopfile.getListPopulationNumbers( s\_population\_sample\_name )
847     \textcolor{comment}{#for each sample (i.e. for each replicate of a sampling with a given set of params:}
848     \textcolor{keywordflow}{for} s\_indiv\_sample \textcolor{keywordflow}{in} ls\_indiv\_sample\_names:
849 
850         \textcolor{comment}{#we also check that at least one pop has at least one individual}
851         \textcolor{comment}{#listed for this subsample}
852         li\_indiv\_counts\_for\_this\_sample=o\_genepopfile.getIndividualCounts( s\_indiv\_subsample\_tag=
      s\_indiv\_sample )
853     
854         \textcolor{keywordflow}{if} sum( li\_indiv\_counts\_for\_this\_sample ) == 0:
855             v\_sample\_value, i\_replicate\_count=get\_sample\_val\_and\_rep\_number\_from\_sample\_name( \(\backslash\)
856                                             s\_indiv\_sample, s\_sample\_scheme )
857             \textcolor{comment}{#we only want to report the first replicate}
858             \textcolor{comment}{#(by inference of course all replicates will be skipped:}
859             \textcolor{keywordflow}{if} i\_replicate\_count == 0:
860                 s\_msg=\textcolor{stringliteral}{"Skipping samples from: "} \(\backslash\)
861                         + o\_genepopfile.original\_file\_name \(\backslash\)
862                         + \textcolor{stringliteral}{".  In pgdriveneestimator.py, all populations "} \(\backslash\)
863                         + \textcolor{stringliteral}{"have zero individuals when sampled using "} \(\backslash\)
864                         + \textcolor{stringliteral}{"scheme: "} + s\_sample\_scheme \(\backslash\)
865                         + \textcolor{stringliteral}{", and with sample parameter, "} + str( v\_sample\_value ) + \textcolor{stringliteral}{"."}
866                 o\_secondary\_outfile.write( s\_msg + \textcolor{stringliteral}{"\(\backslash\)n"} )
867             \textcolor{comment}{#end if first replicate, report}
868             \textcolor{keywordflow}{continue}
869         \textcolor{comment}{#end skip this subsample if no pops have any individuals}
870 
871         \textcolor{comment}{#we skip populations if their (original, un-subsampled size is under }
872         \textcolor{comment}{#min\_pop\_size -- so moved this call above the subsampling}
873         \textcolor{comment}{#loop, and revised to check the population size(s) in the}
874         \textcolor{comment}{#original file #make sure the population(s) meet the min size criteria:}
875         li\_too\_small\_pops=\hyperlink{namespacenegui_1_1pgdriveneestimator_a8255cfe046e2bbb517ee9834d626c021}{get\_pops\_in\_file\_too\_small\_to\_run}( o\_genepopfile
      , 1.0, i\_min\_pop\_size )
876 
877         \textcolor{comment}{#to most-efficiently use multi-processes, that is, to assign to a process a single}
878         \textcolor{comment}{#file with many populations, we sample each pop in the file separately, and divvy}
879         \textcolor{comment}{#the pops up among processes:}
880         \textcolor{keywordflow}{for} i\_population\_number \textcolor{keywordflow}{in} li\_population\_numbers:
881 
882             \textcolor{keywordflow}{if} i\_population\_number \textcolor{keywordflow}{in} li\_too\_small\_pops:
883                 s\_msg=( \textcolor{stringliteral}{"In pgdriveneestimator.py, def drive\_estimator, "} \(\backslash\)
884                                 + \textcolor{stringliteral}{" in file, "}  + s\_filename \(\backslash\)
885                                 + \textcolor{stringliteral}{", skipping pop number, "}  + str( i\_pop\_number ) \(\backslash\)
886                                 + \textcolor{stringliteral}{".  It has fewer than "} + str( i\_min\_pop\_size ) \(\backslash\)
887                                 + \textcolor{stringliteral}{" individuals."} )
888                 o\_secondary\_outfile.write( s\_msg + \textcolor{stringliteral}{"\(\backslash\)n"} )
889                 \textcolor{keywordflow}{continue}
890             \textcolor{comment}{#end if i\_population\_number is}
891 
892             \textcolor{comment}{#we make population subsample list consisting of only this populations number:}
893             s\_this\_pop\_sample\_name=str( i\_population\_number ) 
894 
895             o\_genepopfile.subsamplePopulationsByList( [ i\_population\_number ], s\_this\_pop\_sample\_name )
896 
897             \textcolor{keywordflow}{if} o\_debug\_mode.isSet( DebugMode.PRINT\_REPLICATE\_SELECTIONS ):
898                 print\_test\_list\_replicate\_selection\_indices( o\_genepopfile, 
899                                         s\_sample\_scheme,    
900                                         s\_indiv\_sample, 
901                                         o\_secondary\_outfile, 
902                                         s\_population\_subsample\_tag=s\_this\_pop\_sample\_name )
903             \textcolor{comment}{#end if we're testing, print }
904             
905 
906             \textcolor{comment}{#in naming a the genepop file for the subsampled pop,}
907             \textcolor{comment}{#some processing is needed to avoid NeEstimator file naming errors, and}
908             \textcolor{comment}{#path mangling, so we made a separate def:}
909             s\_genepop\_file\_subsample=\hyperlink{namespacenegui_1_1pgdriveneestimator_a84955fc339f0354149185b5fa6444340}{get\_subsample\_genepop\_file\_name}( 
      o\_genepopfile.original\_file\_name, 
910                                                     s\_indiv\_sample, 
911                                                     s\_this\_pop\_sample\_name )
912 
913             i\_sample\_value, i\_replicate\_number= \(\backslash\)
914                         get\_sample\_val\_and\_rep\_number\_from\_sample\_name( s\_indiv\_sample, s\_sample\_scheme )
915 
916             s\_run\_output\_file=s\_genepop\_file\_subsample + \textcolor{stringliteral}{"\_ne\_run.txt"}
917 
918             o\_neinput=pgin.PGInputNeEstimator( s\_genepop\_file\_subsample )
919 
920             o\_neinput.run\_params=\{ \textcolor{stringliteral}{"crits"}:[ f\_min\_allele\_freq ]  \}
921 
922             o\_neoutput=pgout.PGOutputNeEstimator( s\_genepop\_file\_subsample, s\_run\_output\_file ) 
923 
924             o\_ne\_estimator=pgne.PGOpNeEstimator( o\_neinput, o\_neoutput ) 
925 
926             \textcolor{comment}{#we send to def do\_estimate the genepop file object, o\_genepopfile, and the subsample tag}
927             \textcolor{comment}{#that identifies the correct subsample calculated and stored in the object, so we can write}
928             \textcolor{comment}{#each subsample genepop file in the same process that will use it as input to the the
       estimator, }
929             \textcolor{comment}{#This should limit the number of input files existing concurrenty in the directory to the }
930             \textcolor{comment}{#number of processes in use.  We also send allele freq, and the original genepop file name }
931             \textcolor{comment}{#inside the genepop file manager object):}
932 
933             v\_sample\_value, i\_replicate\_number = \(\backslash\)
934                     get\_sample\_val\_and\_rep\_number\_from\_sample\_name( s\_indiv\_sample, s\_sample\_scheme )
935 
936             lv\_these\_args = [ o\_genepopfile,  
937                                 o\_ne\_estimator, 
938                                 v\_sample\_value, 
939                                 f\_min\_allele\_freq, 
940                                 s\_indiv\_sample, 
941                                 s\_this\_pop\_sample\_name, 
942                                 i\_replicate\_number, 
943                                 o\_debug\_mode,
944                                 IDX\_NE\_ESTIMATOR\_OUTPUT\_FIELDS\_TO\_SKIP ]
945 
946             llv\_args\_each\_process.append( lv\_these\_args )
947         \textcolor{comment}{#end for each population}
948     \textcolor{comment}{#end for each sample name}
949     \textcolor{keywordflow}{return}
950 \textcolor{comment}{#end add\_to\_set\_of\_calls\_to\_do\_estimate}
951 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!do\+\_\+sample@{do\+\_\+sample}}
\index{do\+\_\+sample@{do\+\_\+sample}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{do\+\_\+sample(o\+\_\+genepopfile, s\+\_\+sample\+\_\+scheme, lv\+\_\+sample\+\_\+values, i\+\_\+replicates)}{do_sample(o_genepopfile, s_sample_scheme, lv_sample_values, i_replicates)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+do\+\_\+sample (
\begin{DoxyParamCaption}
\item[{}]{o\+\_\+genepopfile, }
\item[{}]{s\+\_\+sample\+\_\+scheme, }
\item[{}]{lv\+\_\+sample\+\_\+values, }
\item[{}]{i\+\_\+replicates}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_aa5f7fc02442df628112ba81a98a3691e}{}\label{namespacenegui_1_1pgdriveneestimator_aa5f7fc02442df628112ba81a98a3691e}
\begin{DoxyVerb}do_sample adds subsample info to the o_genepopfile GenepopFileManager object,
and so changes it in place, returns no value.  The o_genepopfile can then
be accessed to write a new genepop file that contains the subsampled data.
\end{DoxyVerb}
 

Definition at line 733 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
733 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_aa5f7fc02442df628112ba81a98a3691e}{do\_sample}( o\_genepopfile, s\_sample\_scheme, lv\_sample\_values, i\_replicates ):
734     \textcolor{stringliteral}{'''}
735 \textcolor{stringliteral}{    do\_sample adds subsample info to the o\_genepopfile GenepopFileManager object,}
736 \textcolor{stringliteral}{    and so changes it in place, returns no value.  The o\_genepopfile can then}
737 \textcolor{stringliteral}{    be accessed to write a new genepop file that contains the subsampled data.}
738 \textcolor{stringliteral}{    '''}
739     i\_total\_pops\_in\_file=o\_genepopfile.pop\_total
740 
741     \textcolor{comment}{#sampler requires a population list (in case we want to sample fewer than}
742     \textcolor{comment}{#all the pops in the file). We default to lising all:}
743     \textcolor{comment}{#GenepopFileManager instance o\_genepopfile lists populations as 1,2,3...}
744     li\_population\_list=list( range( 1, i\_total\_pops\_in\_file + 1 ) )
745 
746     o\_sampler=\textcolor{keywordtype}{None}  
747 
748     s\_population\_subsample\_tag=s\_sample\_scheme
749 
750     \textcolor{keywordflow}{if} s\_sample\_scheme==SAMPLE\_BY\_PERCENTAGES:
751 
752         \textcolor{comment}{#our "proportion" sampler object needs proportions instead of percentages:}
753 
754         o\_sample\_params=gps.GenepopFileSampleParamsProportion( li\_population\_numbers=li\_population\_list,
755                                                 lf\_proportions=lv\_sample\_values,
756                                                 i\_replicates=i\_replicates,
757                                                 s\_population\_subsample\_name=s\_population\_subsample\_tag )
758 
759         o\_sampler=gps.GenepopFileSamplerIndividualsByProportion( o\_genepopfile, o\_sample\_params )
760 
761     \textcolor{keywordflow}{elif} s\_sample\_scheme==SAMPLE\_BY\_REMOVAL:
762 
763         o\_sample\_params=gps.GenepopFileSampleParamsRemoval( li\_population\_numbers=li\_population\_list,
764                                                 li\_n\_to\_remove=lv\_sample\_values,
765                                                 i\_replicates=i\_replicates,
766                                                 s\_population\_subsample\_name=s\_population\_subsample\_tag )
767         o\_sampler=gps.GenepopFileSamplerIndividualsByRemoval( o\_genepopfile, o\_sample\_params )
768     \textcolor{keywordflow}{else}:
769         s\_msg=\textcolor{stringliteral}{"in pgdriveneestimator, def do\_sample, unknown value "} \(\backslash\)
770                 + \textcolor{stringliteral}{"for sample scheme: "} + s\_sample\_scheme
771         \textcolor{keywordflow}{raise} Exception( s\_msg )
772     \textcolor{comment}{#end if percent, else removal, else error}
773 
774     o\_sampler.doSample()
775 
776     \textcolor{keywordflow}{return}
777 \textcolor{comment}{#end do\_sample}
778 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!get\+\_\+genepop\+\_\+file\+\_\+list@{get\+\_\+genepop\+\_\+file\+\_\+list}}
\index{get\+\_\+genepop\+\_\+file\+\_\+list@{get\+\_\+genepop\+\_\+file\+\_\+list}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{get\+\_\+genepop\+\_\+file\+\_\+list(s\+\_\+genepop\+\_\+files\+\_\+arg)}{get_genepop_file_list(s_genepop_files_arg)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+get\+\_\+genepop\+\_\+file\+\_\+list (
\begin{DoxyParamCaption}
\item[{}]{s\+\_\+genepop\+\_\+files\+\_\+arg}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a15b09d2967ec4812353b0e146f074799}{}\label{namespacenegui_1_1pgdriveneestimator_a15b09d2967ec4812353b0e146f074799}
\begin{DoxyVerb}if invoked from the console the arg is a glob expression
if invoked from the gui interface in pgguineestimator.py,
the arg is a list, such that eval will genreate a python
list of strings.

This def assumes that no user will invoke this mod from 
the command line with a glob expression, includeing a file name,
that can be evaluated as a python list (i.e. "[ \"item\", \"item\" ... ]\end{DoxyVerb}
 

Definition at line 320 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
320 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_a15b09d2967ec4812353b0e146f074799}{get\_genepop\_file\_list}( s\_genepop\_files\_arg ):
321     \textcolor{stringliteral}{'''}
322 \textcolor{stringliteral}{    if invoked from the console the arg is a glob expression}
323 \textcolor{stringliteral}{    if invoked from the gui interface in pgguineestimator.py,}
324 \textcolor{stringliteral}{    the arg is a list, such that eval will genreate a python}
325 \textcolor{stringliteral}{    list of strings.}
326 \textcolor{stringliteral}{}
327 \textcolor{stringliteral}{    This def assumes that no user will invoke this mod from }
328 \textcolor{stringliteral}{    the command line with a glob expression, includeing a file name,}
329 \textcolor{stringliteral}{    that can be evaluated as a python list (i.e. "[ \(\backslash\)"item\(\backslash\)", \(\backslash\)"item\(\backslash\)" ... ]}
330 \textcolor{stringliteral}{    }
331 \textcolor{stringliteral}{    '''}
332 
333     ls\_files=\textcolor{keywordtype}{None}
334 
335     \textcolor{keywordflow}{try}:
336 
337         ls\_files=eval( s\_genepop\_files\_arg )
338 
339         \textcolor{keywordflow}{if} type( ls\_files ) != list:
340             \textcolor{comment}{#still could be a glob expression, for example,}
341             \textcolor{comment}{#of a file name that python can eval as an int or float,}
342             \textcolor{comment}{#so we'll just glob the orig:}
343 
344             ls\_files=glob.glob( s\_genepop\_files\_arg )
345         \textcolor{keywordflow}{else}:
346             \textcolor{comment}{#make sure it's a list of strings}
347             \textcolor{keywordflow}{if} not( file\_name\_list\_is\_all\_strings( ls\_files ) ):
348                 s\_msg=\textcolor{stringliteral}{"In pgdriveneestimator.py, def get\_genepop\_file\_list, "} \(\backslash\)
349                         + \textcolor{stringliteral}{"genepop file arg evaluated as a list, but, not composed "} \(\backslash\)
350                         + \textcolor{stringliteral}{"of strings: "} + str( list ) + \textcolor{stringliteral}{"."}
351                 \textcolor{keywordflow}{raise} Exception( s\_msg )
352             \textcolor{comment}{#end if not all strings in list}
353     \textcolor{keywordflow}{except} ( NameError, SyntaxError ) \textcolor{keyword}{as} evalfail:
354 
355         \textcolor{stringliteral}{'''}
356 \textcolor{stringliteral}{        this is caught if the eval fails due to }
357 \textcolor{stringliteral}{        the arg being a string.  Further, a syntax}
358 \textcolor{stringliteral}{        error results if the arg begins/ends in a wildcard}
359 \textcolor{stringliteral}{        "*" char -- as will happen often with a glob.}
360 \textcolor{stringliteral}{}
361 \textcolor{stringliteral}{        So for these eval failures we assume the arg }
362 \textcolor{stringliteral}{        is a glob expression}
363 \textcolor{stringliteral}{        '''}
364         ls\_files=glob.glob( s\_genepop\_files\_arg )
365     \textcolor{comment}{#end try eval, except name error}
366 
367     \textcolor{keywordflow}{return} ls\_files
368 \textcolor{comment}{#end get\_genepop\_file\_list}
369 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!get\+\_\+invalid\+\_\+file\+\_\+names@{get\+\_\+invalid\+\_\+file\+\_\+names}}
\index{get\+\_\+invalid\+\_\+file\+\_\+names@{get\+\_\+invalid\+\_\+file\+\_\+names}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{get\+\_\+invalid\+\_\+file\+\_\+names(ls\+\_\+file\+\_\+names)}{get_invalid_file_names(ls_file_names)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+get\+\_\+invalid\+\_\+file\+\_\+names (
\begin{DoxyParamCaption}
\item[{}]{ls\+\_\+file\+\_\+names}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a944008262ae2ee7c6fc796499be626ce}{}\label{namespacenegui_1_1pgdriveneestimator_a944008262ae2ee7c6fc796499be626ce}
\begin{DoxyVerb}Currently only check is for file name
length (see comments above declaration of const 
MAX_GENEPOP_FILE_NAME_LENGTH.
\end{DoxyVerb}
 

Definition at line 277 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
277 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_a944008262ae2ee7c6fc796499be626ce}{get\_invalid\_file\_names}( ls\_file\_names ):
278     \textcolor{stringliteral}{'''}
279 \textcolor{stringliteral}{    Currently only check is for file name}
280 \textcolor{stringliteral}{    length (see comments above declaration of const }
281 \textcolor{stringliteral}{    MAX\_GENEPOP\_FILE\_NAME\_LENGTH.}
282 \textcolor{stringliteral}{    '''}
283     MSG\_FILE\_TOO\_LONG=\textcolor{stringliteral}{"File name longer than "} \(\backslash\)
284             + str( MAX\_GENEPOP\_FILE\_NAME\_LENGTH ) \(\backslash\)
285             + \textcolor{stringliteral}{" characters."}
286 
287     ls\_invalid\_file\_names\_and\_messages=[]
288 
289     \textcolor{keywordflow}{for} s\_file\_name \textcolor{keywordflow}{in} ls\_file\_names:
290         s\_file\_name\_no\_path=os.path.basename( s\_file\_name )
291         i\_len\_file\_name=len( s\_file\_name\_no\_path )
292 
293         \textcolor{keywordflow}{if} i\_len\_file\_name > MAX\_GENEPOP\_FILE\_NAME\_LENGTH:
294             ls\_invalid\_file\_names\_and\_messages.append( \(\backslash\)
295                     \textcolor{stringliteral}{", "}.join( [ s\_file\_name, MSG\_FILE\_TOO\_LONG ] ) )
296         \textcolor{comment}{#and if file name too long}
297     \textcolor{comment}{#end for each file name}
298 
299     \textcolor{keywordflow}{return} ls\_invalid\_file\_names\_and\_messages
300 \textcolor{comment}{#end get\_invalid\_file\_names}
301 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!get\+\_\+pops\+\_\+in\+\_\+file\+\_\+too\+\_\+small\+\_\+to\+\_\+run@{get\+\_\+pops\+\_\+in\+\_\+file\+\_\+too\+\_\+small\+\_\+to\+\_\+run}}
\index{get\+\_\+pops\+\_\+in\+\_\+file\+\_\+too\+\_\+small\+\_\+to\+\_\+run@{get\+\_\+pops\+\_\+in\+\_\+file\+\_\+too\+\_\+small\+\_\+to\+\_\+run}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{get\+\_\+pops\+\_\+in\+\_\+file\+\_\+too\+\_\+small\+\_\+to\+\_\+run(o\+\_\+genepopfile, f\+\_\+proportion, i\+\_\+min\+\_\+pop\+\_\+size)}{get_pops_in_file_too_small_to_run(o_genepopfile, f_proportion, i_min_pop_size)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+get\+\_\+pops\+\_\+in\+\_\+file\+\_\+too\+\_\+small\+\_\+to\+\_\+run (
\begin{DoxyParamCaption}
\item[{}]{o\+\_\+genepopfile, }
\item[{}]{f\+\_\+proportion, }
\item[{}]{i\+\_\+min\+\_\+pop\+\_\+size}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a8255cfe046e2bbb517ee9834d626c021}{}\label{namespacenegui_1_1pgdriveneestimator_a8255cfe046e2bbb517ee9834d626c021}
\begin{DoxyVerb}checks size of every pop in the file
in case we need to skip some pops and 
accept others.
\end{DoxyVerb}
 

Definition at line 476 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
476 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_a8255cfe046e2bbb517ee9834d626c021}{get\_pops\_in\_file\_too\_small\_to\_run}( o\_genepopfile, f\_proportion, 
      i\_min\_pop\_size ):
477     \textcolor{stringliteral}{'''}
478 \textcolor{stringliteral}{    checks size of every pop in the file}
479 \textcolor{stringliteral}{    in case we need to skip some pops and }
480 \textcolor{stringliteral}{    accept others.}
481 \textcolor{stringliteral}{    '''}
482 
483     li\_popsizes=o\_genepopfile.getIndividualCounts()
484 
485     li\_pops\_too\_small = []
486     \textcolor{keywordflow}{for} idx\_pop \textcolor{keywordflow}{in} range( len ( li\_popsizes ) ):
487         i\_size\_of\_pop=int( round( li\_popsizes[ idx\_pop ] * f\_proportion ) )
488         \textcolor{keywordflow}{if} i\_size\_of\_pop < i\_min\_pop\_size:
489             li\_pops\_too\_small.append( idx\_pop )
490         \textcolor{comment}{#end if subsample size too small}
491     \textcolor{comment}{#end for each pop number}
492     \textcolor{keywordflow}{return} li\_pops\_too\_small
493 \textcolor{comment}{#end get\_pops\_in\_file\_too\_small\_to\_run}
494 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name@{get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name}}
\index{get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name@{get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name(s\+\_\+original\+\_\+genepop\+\_\+file\+\_\+name, s\+\_\+indiv\+\_\+sample, s\+\_\+this\+\_\+pop\+\_\+sample\+\_\+name)}{get_subsample_genepop_file_name(s_original_genepop_file_name, s_indiv_sample, s_this_pop_sample_name)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+get\+\_\+subsample\+\_\+genepop\+\_\+file\+\_\+name (
\begin{DoxyParamCaption}
\item[{}]{s\+\_\+original\+\_\+genepop\+\_\+file\+\_\+name, }
\item[{}]{s\+\_\+indiv\+\_\+sample, }
\item[{}]{s\+\_\+this\+\_\+pop\+\_\+sample\+\_\+name}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a84955fc339f0354149185b5fa6444340}{}\label{namespacenegui_1_1pgdriveneestimator_a84955fc339f0354149185b5fa6444340}
\begin{DoxyVerb}Was originally simply a matter of replacing, in the original genepop file,
dots with underscores, but Windows revealed a case that needed attention 
(see "replace" below).
\end{DoxyVerb}
 

Definition at line 781 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
781                                                     s\_this\_pop\_sample\_name ):
782     \textcolor{stringliteral}{'''}
783 \textcolor{stringliteral}{    Was originally simply a matter of replacing, in the original genepop file,}
784 \textcolor{stringliteral}{    dots with underscores, but Windows revealed a case that needed attention }
785 \textcolor{stringliteral}{    (see "replace" below).}
786 \textcolor{stringliteral}{    '''}
787 
788     s\_genepop\_file\_subsample=s\_original\_genepop\_file\_name \(\backslash\)
789                                 + INPUT\_FILE\_DOT\_CHAR\_REPLACEMENT \(\backslash\)
790                                 +  s\_indiv\_sample \(\backslash\)
791                                 + INPUT\_FILE\_DOT\_CHAR\_REPLACEMENT \(\backslash\)
792                                 + \textcolor{stringliteral}{"g"} + INPUT\_FILE\_DOT\_CHAR\_REPLACEMENT \(\backslash\)
793                                 + s\_this\_pop\_sample\_name
794 
795 
796     \textcolor{comment}{#Note: if a period is left in the original file name,}
797     \textcolor{comment}{#NeEstimator, when naming "*NoDat.txt" file, will replace the right-most}
798     \textcolor{comment}{#period all text that follows it,  with "NoDat.txt" }
799     \textcolor{comment}{#-- this then removes any percent and replicate number text }
800     \textcolor{comment}{#I'm using to make files unique, and so creates a }
801     \textcolor{comment}{#non-uniq *NoDat.txt file name, which, when one process removes it, }
802     \textcolor{comment}{#and another goes looking for it , throws an exception -- (an }
803     \textcolor{comment}{#exception from the multiprocessing.Pools async mapping -- file-not-found,}
804     \textcolor{comment}{#but no trace since it occurs in a different process from the main).}
805     \textcolor{comment}{#This peculiar mangling of a users input file -- was preventing me in previous versions, }
806     \textcolor{comment}{#from deleting NoDat files, and also I think meant that only the }
807     \textcolor{comment}{#last process in a given group of replicates (share same genepop file}
808     \textcolor{comment}{#and proportion sampled) to use the NoDAt file got to write it's NoDat info. }
809     \textcolor{comment}{#Removing all periods from the input file to the NeEstimator program, I belive,}
810     \textcolor{comment}{#completely solves the problems.}
811     s\_genepop\_file\_subsample=s\_genepop\_file\_subsample.replace( \textcolor{stringliteral}{"."}, INPUT\_FILE\_DOT\_CHAR\_REPLACEMENT )
812 
813     \textcolor{comment}{#problem seen in Windows, in which when this mod is invoked as \_\_main\_\_ from a shell}
814     \textcolor{comment}{#then ".\(\backslash\)\(\backslash\)" is appended to (at least) one genepop file name.  This then is mangled by}
815     \textcolor{comment}{#the above replace, so we restore the leading dot char:}
816 
817     \textcolor{keywordflow}{if} s\_genepop\_file\_subsample.startswith(  \textcolor{stringliteral}{"\_"} ):
818         s\_path\_seperator\_this\_os=os.path.sep
819         s\_genepop\_file\_subsample=\textcolor{stringliteral}{"."} + s\_genepop\_file\_subsample[1:] 
820     \textcolor{comment}{#end if path was mangled by replace}
821 
822 
823     \textcolor{keywordflow}{return} s\_genepop\_file\_subsample
824 \textcolor{comment}{#end get\_subsample\_genepop\_file\_name}
825 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!mymain@{mymain}}
\index{mymain@{mymain}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{mymain(q\+\_\+args)}{mymain(q_args)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+mymain (
\begin{DoxyParamCaption}
\item[{}]{q\+\_\+args}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_a9195d73a2642b87625772820ffff8023}{}\label{namespacenegui_1_1pgdriveneestimator_a9195d73a2642b87625772820ffff8023}
\begin{DoxyVerb}This code was at mod level under if __name__=="__main__",
but moved inside this def so this mod can be imported
and run inside python with a set of args identical to
those required on the command line.

This was an adaptation to enable PGGuiNeEstimator objects
to import this mod, then call this def after they load 
params (args for this driver) from their interface
\end{DoxyVerb}
 

Definition at line 1165 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
1165 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_a9195d73a2642b87625772820ffff8023}{mymain}( *q\_args ):
1166     \textcolor{stringliteral}{'''}
1167 \textcolor{stringliteral}{    This code was at mod level under if \_\_name\_\_=="\_\_main\_\_",}
1168 \textcolor{stringliteral}{    but moved inside this def so this mod can be imported}
1169 \textcolor{stringliteral}{    and run inside python with a set of args identical to}
1170 \textcolor{stringliteral}{    those required on the command line.}
1171 \textcolor{stringliteral}{}
1172 \textcolor{stringliteral}{    This was an adaptation to enable PGGuiNeEstimator objects}
1173 \textcolor{stringliteral}{    to import this mod, then call this def after they load }
1174 \textcolor{stringliteral}{    params (args for this driver) from their interface}
1175 \textcolor{stringliteral}{    '''}
1176 
1177     b\_exec\_found=did\_find\_ne\_estimator\_executable()
1178 
1179     \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} did\_find\_ne\_estimator\_executable():
1180         \textcolor{keywordflow}{raise} Exception( \textcolor{stringliteral}{"in pgdriveneestimator.py, def mymain(), did not find NeEstimator executable."} )
1181     \textcolor{comment}{#end if can't find executable}
1182 
1183     drive\_estimator(  *( q\_args ) )
1184 
1185     \textcolor{keywordflow}{return}
1186 \textcolor{comment}{#end mymain}
1187 
\end{DoxyCode}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file@{raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file}}
\index{raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file@{raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file(o\+\_\+genepopfile)}{raise_exception_if_non_single_pop_file(o_genepopfile)}}]{\setlength{\rightskip}{0pt plus 5cm}def negui.\+pgdriveneestimator.\+raise\+\_\+exception\+\_\+if\+\_\+non\+\_\+single\+\_\+pop\+\_\+file (
\begin{DoxyParamCaption}
\item[{}]{o\+\_\+genepopfile}
\end{DoxyParamCaption}
)}\hypertarget{namespacenegui_1_1pgdriveneestimator_ac98833013f11d6aa3544b0fc60951632}{}\label{namespacenegui_1_1pgdriveneestimator_ac98833013f11d6aa3544b0fc60951632}
\begin{DoxyVerb}Not currently in use ( 2016_08_10 ) -- was used when
genepop files with >1 population were not accepted.
\end{DoxyVerb}
 

Definition at line 454 of file pgdriveneestimator.\+py.


\begin{DoxyCode}
454 \textcolor{keyword}{def }\hyperlink{namespacenegui_1_1pgdriveneestimator_ac98833013f11d6aa3544b0fc60951632}{raise\_exception\_if\_non\_single\_pop\_file}( o\_genepopfile ):
455     \textcolor{stringliteral}{'''}
456 \textcolor{stringliteral}{    Not currently in use ( 2016\_08\_10 ) -- was used when}
457 \textcolor{stringliteral}{    genepop files with >1 population were not accepted.}
458 \textcolor{stringliteral}{    '''}
459     i\_total\_pops=o\_genepopfile.pop\_total
460 
461     \textcolor{keywordflow}{if} ( i\_total\_pops != 1 ):
462         s\_msg=\textcolor{stringliteral}{"In pgdriveneestimator.py:"} + OUTPUT\_ENDLINE
463         \textcolor{keywordflow}{if} i\_total\_pops < 1:
464             s\_msg+=\textcolor{stringliteral}{"No \(\backslash\)"pop\(\backslash\)" entry found in file, "} \(\backslash\)
465                     + s\_filename
466         \textcolor{keywordflow}{else}:
467             s\_msg+=\textcolor{stringliteral}{"Current implementation of drive accepts genepop "} \(\backslash\)
468                 + \textcolor{stringliteral}{"files with only a single pop."}
469         \textcolor{comment}{#end if lt 1 else more}
470         \textcolor{keywordflow}{raise} Exception( s\_msg )
471     \textcolor{comment}{#end if non-single pop file}
472 
473     \textcolor{keywordflow}{return}
474 \textcolor{comment}{#end raise\_exception\_non\_single\_pop\_file}
475 
\end{DoxyCode}


\subsection{Variable Documentation}
\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!L\+S\+\_\+\+A\+R\+GS@{L\+S\+\_\+\+A\+R\+GS}}
\index{L\+S\+\_\+\+A\+R\+GS@{L\+S\+\_\+\+A\+R\+GS}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{L\+S\+\_\+\+A\+R\+GS}{LS_ARGS}}]{\setlength{\rightskip}{0pt plus 5cm}list negui.\+pgdriveneestimator.\+L\+S\+\_\+\+A\+R\+GS}\hypertarget{namespacenegui_1_1pgdriveneestimator_a728846c66f219090e707bfce27506896}{}\label{namespacenegui_1_1pgdriveneestimator_a728846c66f219090e707bfce27506896}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = [ \textcolor{stringliteral}{"glob pattern to match genepop files, enclosed in quotes. (Example: \(\backslash\)"mydir/*txt\(\backslash\)")"}, 
2         \textcolor{stringliteral}{"\(\backslash\)"percent\(\backslash\)" or \(\backslash\)"remove\(\backslash\)", indicating whether to sample by percentages or removing N individuals
       randomly"},
3         \textcolor{stringliteral}{"list of integers, percentages or N's (for removing N individuals),  (Examples: 10,70,90 or 1,3,5)"}
      , 
4         \textcolor{stringliteral}{"minimum pop size (single integer)"},
5         \textcolor{stringliteral}{"float, minimum allele frequency for NeEstimator's Crit value"},
6         \textcolor{stringliteral}{"integer, total replicates to run (Note: when removing one individual in a pop of N, all N
       combinations will be run)"} ]
\end{DoxyCode}


Definition at line 60 of file pgdriveneestimator.\+py.

\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!L\+S\+\_\+\+O\+P\+T\+I\+O\+N\+A\+L\+\_\+\+A\+R\+GS@{L\+S\+\_\+\+O\+P\+T\+I\+O\+N\+A\+L\+\_\+\+A\+R\+GS}}
\index{L\+S\+\_\+\+O\+P\+T\+I\+O\+N\+A\+L\+\_\+\+A\+R\+GS@{L\+S\+\_\+\+O\+P\+T\+I\+O\+N\+A\+L\+\_\+\+A\+R\+GS}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{L\+S\+\_\+\+O\+P\+T\+I\+O\+N\+A\+L\+\_\+\+A\+R\+GS}{LS_OPTIONAL_ARGS}}]{\setlength{\rightskip}{0pt plus 5cm}list negui.\+pgdriveneestimator.\+L\+S\+\_\+\+O\+P\+T\+I\+O\+N\+A\+L\+\_\+\+A\+R\+GS}\hypertarget{namespacenegui_1_1pgdriveneestimator_ab14b858e573928fa3916ed18030e5ecc}{}\label{namespacenegui_1_1pgdriveneestimator_ab14b858e573928fa3916ed18030e5ecc}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = [ \textcolor{stringliteral}{"total processes to use (single integer) Default is 1 process.  "} \(\backslash\)
2         + \textcolor{stringliteral}{"This arg is required if the final debug optional arg is added"},
3         \textcolor{stringliteral}{"\(\backslash\)"debug1\(\backslash\)" to add to the output a table listing, for each indiv. in each file, "} \(\backslash\)
4                 + \textcolor{stringliteral}{"which replicate Ne estimates include the indiv, or,\(\backslash\)n \(\backslash\)"debug2\(\backslash\)" "} \(\backslash\)
5                 + \textcolor{stringliteral}{"to run without parallelized processes,"} \(\backslash\)
6                 + \textcolor{stringliteral}{"to produce the table, and to save all subsample "} \(\backslash\)
7                 + \textcolor{stringliteral}{"genepop files and NeEstimator output files."} ]
\end{DoxyCode}


Definition at line 67 of file pgdriveneestimator.\+py.

\index{negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}!s\+\_\+usage@{s\+\_\+usage}}
\index{s\+\_\+usage@{s\+\_\+usage}!negui\+::pgdriveneestimator@{negui\+::pgdriveneestimator}}
\subsubsection[{\texorpdfstring{s\+\_\+usage}{s_usage}}]{\setlength{\rightskip}{0pt plus 5cm}negui.\+pgdriveneestimator.\+s\+\_\+usage}\hypertarget{namespacenegui_1_1pgdriveneestimator_a147253c79bbe39eef5bc01233bda5ab7}{}\label{namespacenegui_1_1pgdriveneestimator_a147253c79bbe39eef5bc01233bda5ab7}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = pgut.do\_usage\_check( sys.argv, LS\_ARGS, 
2             ls\_optional\_arg\_descriptions=LS\_OPTIONAL\_ARGS,
3             b\_multi\_line\_msg=\textcolor{keyword}{True} )
\end{DoxyCode}


Definition at line 1189 of file pgdriveneestimator.\+py.

